{"version":3,"file":"index.js","sources":["../../src/_/_helpers.js","../../src/_/_ui.js","../../src/_/_cnt_page_edit.js","../../src/edit-page/index.js"],"sourcesContent":["export const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const getPageNumber = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPagination = (meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = 'no records to display'; return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    // console.log(pbc);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    // page 1 \n\n    // page 3\n    // 1 2\n\n    // page 5\n    // 2 3 4 .. \n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?'..':i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                let url = window.location.href.split('/page');\n                let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, urlF);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">Draft</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">Published</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">Unpublished</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">Drafts</div>';\n    }\n}\n\nexport const formatPrice = (price) => {\n\n    const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: \"USD\", });\n    if(typeof(price) === 'undefined' || price == '') price = 0;\n    price = parseFloat(price);\n    price = formatter.format(price);\n    return price;\n}\n\nexport const formatTime = (timestamp) => {\n\t\n    let a = new Date(timestamp * 1000);\n    let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n// parse backend error to frontend\nexport const parseApiError = (data) => {\n\n    // alert(data.reason);\n    // return; \n    switch(data.code){\n\n        // for user to resignin\n        // case 401: location.href=\"https://auth.kenzap.com/?redirectF.php?referral=\"+window.location.href; break;\n        case 401: if(window.location.href.indexOf('localhost')!=-1){ alert('Please update user token'); }else{ location.href='https://auth.kenzap.com/?app=65432108792785&redirect='+window.location.href; } break;\n        default: alert(data.reason); break;\n    }\n}\n\n// init breadcrumbs navigation\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * Simulate a click event.\n * @public\n * @param {Element} elem  the element to simulate a click on\n */\n export const simulateClick = (elem) => {\n     \n\t// Create our event (with options)\n\tvar evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\t// If cancelled, don't dispatch our event\n\tvar canceled = !elem.dispatchEvent(evt);\n};\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\nexport const onChange = (sel, fn) => {\n\n    // console.log('onChange');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (now, time) => {\n\n    console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return 'moments ago';\n    if(past < 3600) return parseInt(past / 60) + ' minutes ago';\n    if(past < 86400) return parseInt(past / 60 / 24) + ' hours ago';\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","// initiate header and related scripts\nexport const initHeader = (response) => {\n\n  // cache header from backend\n  if(response.header) localStorage.setItem('header', response.header);\n\n  // load header to html if not present\n  if(!document.querySelector(\"#k-script\")){\n\n      let child = document.createElement('div');\n      child.innerHTML = localStorage.getItem('header');\n      child = child.firstChild;\n      document.body.prepend(child);\n\n      // run header scripts\n      let script = Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n  }\n\n  // load locales if present\n  if(response.locale) window.i18n.init(response.locale); \n}\n\n// show loader\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n// hide loader\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n// hide loader\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n// categories input tags\nexport const simpleTags = (element) => {\n\n    if (!element) {\n        throw new Error(\"DOM Element is undifined! Please choose HTML target element.\")\n    }\n\n    let DOMParent = element\n    let DOMList\n    let DOMInput\n    let dataAttribute\n    let arrayOfList\n\n    function DOMCreate() {\n        let ul = document.createElement(\"ul\")\n        let input = document.createElement(\"input\")\n\n        input.setAttribute('placeholder', 'new category');\n\n        DOMParent.appendChild(ul)\n        DOMParent.appendChild(input)\n\n        // first child is <ul>\n        DOMList = DOMParent.firstElementChild\n        // last child is <input>\n        DOMInput = DOMParent.lastElementChild\n    }\n\n    function DOMRender() {\n        // clear the entire <li> inside <ul>\n        DOMList.innerHTML = \"\"\n\n        // render each <li> to <ul>\n        arrayOfList.forEach((currentValue, index) => {\n\n            if (currentValue) {\n\n                let li = document.createElement(\"li\")\n                li.innerHTML = `${currentValue} <a>&times;</a>`\n                li.querySelector(\"a\").addEventListener(\"click\", function () {\n                    onDelete(index)\n                })\n\n                DOMList.appendChild(li)\n            }\n        })\n\n        setAttribute()\n    }\n\n    function onKeyUp() {\n        DOMInput.addEventListener(\"keyup\", function (event) {\n            let text = this.value.trim()\n\n            // check if ',' or 'enter' key was press\n            if (text.includes(\",\") || event.keyCode === 13) {\n                // check if empty text when ',' is remove\n                if (text.replace(\",\", \"\") !== \"\") {\n                    // push to array and remove ','\n                    arrayOfList.push(text.replace(\",\", \"\"))\n                }\n                // clear input\n                this.value = \"\"\n            }\n\n            DOMRender()\n        })\n    }\n\n    function onDelete(id) {\n        arrayOfList = arrayOfList.filter(function (currentValue, index) {\n            if (index === id) {\n                return false\n            }\n            return currentValue\n        })\n\n        DOMRender()\n    }\n\n    function getAttribute() {\n        dataAttribute = DOMParent.getAttribute(\"data-simple-tags\")\n        dataAttribute = dataAttribute.split(\",\")\n\n        // store array of data attribute in arrayOfList\n        arrayOfList = dataAttribute.map((currentValue) => {\n            return currentValue.trim()\n        })\n    }\n\n    function setAttribute() {\n        DOMParent.setAttribute(\"data-simple-tags\", arrayOfList.toString())\n    }\n\n    getAttribute()\n    DOMCreate()\n    DOMRender()\n    onKeyUp()\n}\n\n// html product list loader\nexport const productListContent = (__) => {\n\n    return `\n    <div class=\"container\">\n\n        <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <button class=\"btn btn-primary btn-add\" type=\"button\">${ __('Add product') }</button>\n        </div>\n \n        <div class=\"row\">\n            <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n                <div class=\"card border-white shadow-sm\">\n                    <div class=\"card-body\">\n                        <div class=\"no-footer\">\n                            <div class=\"row\">\n                                <div class=\"col-sm-12\">\n                                    <div class=\"table-responsive\">\n                                        <table class=\"table table-hover table-borderless align-middle table-striped table-p-list\" style=\"min-width: 800px;\">\n                                            <thead>\n                                                \n                                            </thead>\n                                            <tbody>\n\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"row\">\n                                <div class=\"col-sm-12 col-md-5\">\n                                <div class=\"dataTables_info mt-3 text-secondary fw-lighter\" id=\"listing_info\" role=\"status\" aria-live=\"polite\">&nbsp;</div>\n                                </div>\n                                <div class=\"col-sm-12 col-md-7\">\n                                <div class=\"dataTables_paginate paging_simple_numbers mt-3\" id=\"listing_paginate\"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>`;\n\n}\n\n// html product list loader\nexport const productEditContent = (__) => {\n\n    return `\n    <div class=\"container p-edit\">\n        <div class=\"mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n                <div class=\"sections\" id=\"sections\" role=\"tablist\" style=\"width:100%;\">\n\n                    <div class=\"row\">\n                    <div class=\"col-12 grid-margin stretch-card\">\n                        <div class=\"card border-white shadow-sm p-sm-3\">\n                        <div class=\"card-body\">\n\n                            <div class=\"landing_status\"></div>\n                            <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                            <h4 id=\"elan\" class=\"card-title mb-4\">Description</h4>\n\n                            <div id=\"placeholders\" >\n\n                            <div class=\"mb-3\">\n                                <label class=\"banner-title-l form-label\" for=\"p-title\">Title</label>\n                                <input type=\"text\" class=\"form-control inp\" id=\"p-title\" placeholder=\"Sushi set..\">\n                                <p class=\"card-description\">\n                                <a target=\"_blank\" style=\"float:right;margin-top:4px;display:none;\" href=\"https://kenzap.com/post/kenzap-marketplace-listing-title-guidelines/\">Title guidelines.</a>\n                                </p>\n                            </div>\n\n                            <div class=\"mb-3\">\n                                <label class=\"banner-descshort-l form-label\" for=\"p-sdesc\">Short Description</label>\n                                <textarea class=\"form-control inp\" id=\"p-sdesc\" placeholder=\"  \" maxlength=\"120\" rows=\"2\"></textarea>\n                            </div>\n\n                            <div class=\"mb-3\">\n                                <label class=\"banner-descshort-l form-label\" for=\"desc\">Images</label>\n                                <div class=\"clearfix\"></div>\n                                <div class=\"ic\"></div>\n                                <div class=\"clearfix\"></div>\n                            </div>\n\n                            <div class=\"mb-3\">\n                                <div class=\"clearfix\"></div>\n                                <div style=\"clear:both;margin-top:16px;\"></div>\n                                <label class=\"banner-descshort-l form-label\" for=\"p-desc\">Description</label>\n                                <textarea class=\"form-control inp\" id=\"p-ldesc\" placeholder=\" \" maxlength=\"2000\" rows=\"10\"></textarea>\n                            </div>\n\n                            <div class=\"mb-3 mw\" >\n                                <div class=\"list-wrapper\">\n                                <ul class=\"d-flex flex-column-reverse features\">\n                                </ul>\n                                </div>\n                                <p class=\"card-description\"> </p>\n                            </div>\n\n                            <div class=\"bg-light price_group mt-3 mb-3 p-4\">\n                                <h4 class=\"card-title mb-3\">Price</h4>\n                                <div class=\"price_group_base\">\n                                <div class=\"mb-3 mw\" >\n                                    <div class=\"input-group\">\n\n                                        <div id=\"p-price-c\">\n                                            <label for=\"p-price\" class=\"form-label\">Price normal <span class=\"lang\"></span></label>\n                                            <div class=\"input-group\">\n\n                                            <span class=\"input-group-text\">$</span>\n                                            <input id=\"p-price\" type=\"text\" class=\"form-control inp\" placeholder=\"55.00\" autocomplete=\"off\" >\n\n                                            </div>\n                                        </div>\n                                        <div id=\"p-priced-c\">\n                                            <label for=\"p-priced\" class=\"form-label\">Discounted <span class=\"lang\"></span></label>\n                                            <input id=\"p-priced\" type=\"text\" class=\"form-control inp\" placeholder=\"45.00\" autocomplete=\"off\" >\n                                        </div>\n\n                                    </div>\n                                    <div class=\"add-mix-ctn\"><a class=\"add-mix-block\" href=\"#\" data-action=\"add\">+ add variation</a></div>\n                                </div>\n\n                                <div class=\"variation-blocks\">\n\n                                </div>\n\n                                <div style='margin:24px 0 48px;border-bottom:0px solid #ccc;'></div>\n\n                                <div class=\"mb-3 mw\" >\n                                    <h4 id=\"elan\" class=\"card-title\">Inventory</h4>\n                                    <label for=\"p-sku\" class=\"form-label\">SKU <span class=\"lang\"></span></label>\n                                    <div class=\"input-group\">\n                                    <input id=\"p-sku\" type=\"text\" style=\"width:100%;\" class=\"form-control inp\" placeholder=\"\" maxlength=\"200\">\n                                    <p class=\"card-description\">\n                                        SKU hint\n                                    </p>\n                                    </div>\n                                </div>\n\n                                </div>\n                            </div>\n                            </div>\n\n                            <div class=\"desc-repeater-cont\">\n\n                            </div>\n\n                            <p class=\"card-description\"> &nbsp;</p>\n\n                        </div>\n                        </div>\n                    </div>\n\n                    </div>\n\n                </div>\n            </div>\n            <div class=\"col-lg-3 grid-margin grid-margin-lg-0 grid-margin-md-0\">\n\n                <div class=\"row\">\n                <div class=\"col-12 grid-margin stretch-card\">\n                    <div class=\"card border-white shadow-sm p-sm-3\">\n                    <div class=\"card-body\">\n\n                        <h4 class=\"card-title\" style=\"display:none;\">General</h4>\n                        <div class=\"landing_status\"></div>\n                        <input type=\"hidden\" class=\"form-control\" id=\"landing-slug\" value=\"\">\n\n                        <h4 id=\"elan\" class=\"card-title mb-4\">Status</h4>\n                        <div id=\"status-cont\" class=\"mb-3\">\n\n                        <div class=\"col-sm-12\">\n                            <div class=\"form-check\">\n                            <label class=\"form-check-label status-publish form-label\">\n                                <input type=\"radio\" class=\"form-check-input\" name=\"p-status\" id=\"p-status1\" value=\"1\" >\n                                Published\n                            </label>\n                            </div>\n                        </div>\n\n                        <div class=\"col-sm-12\">\n                            <div class=\"form-check\">\n                            <label class=\"form-check-label status-draft form-label\">\n                                <input type=\"radio\" class=\"form-check-input\" name=\"p-status\" id=\"p-status0\" value=\"0\" >\n                                Draft\n                            </label>\n                            </div>\n                        </div>\n                        </div>\n\n                        <h4 id=\"elan\" class=\"card-title mb-4\">Categories</h4>\n                        <div id=\"p-cats\" class=\"simple-tags mb-4\" data-simple-tags=\"\"></div>\n                        <div class=\"clearfix\"> </div>\n\n                        <div class=\"d-grid gap-2\">\n                        <button class=\"btn btn-primary btn-save\" type=\"button\">Save</button>\n                        </div>\n\n                    </div>\n                    </div>\n                </div>\n                </div>\n\n            </div>\n            </div>\n            </div>\n\n\n\n            </div>\n            </div>\n            </div>\n\n\n        <div class=\"modal p-modal\" tabindex=\"-1\">\n          <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                \n                </div>\n                <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" >   \n          <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n            <div class=\"d-flex\">  \n              <div class=\"toast-body\"></div>\n              <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n            </div>\n          </div>\n        </div>\n    `;\n}\n\nexport const settingsContent = (__) => {\n\n    return `\n    <div class=\"container p-edit\">\n        <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <button class=\"btn btn-primary btn-save\" type=\"button\">${ __('Save changes') }</button>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n              <div class=\"card border-white shadow-sm p-sm-3\">\n                <nav class=\"nav tab-content mb-4\" role=\"tablist\">\n                    <div class=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\n                        <a class=\"nav-link active\" id=\"nav-notifications-link\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-notifications\" type=\"button\" role=\"tab\" aria-controls=\"nav-notifications\" aria-selected=\"true\" href=\"#\">${ __('Notifications') }</a>\n                        <a class=\"nav-link\" id=\"nav-currency-link\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-currency\" type=\"button\" role=\"tab\" aria-controls=\"nav-currency\" aria-selected=\"true\" href=\"#\">${ __('Currency') }</a>\n                        <a class=\"nav-link\" id=\"nav-payout-link\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-payout\" type=\"button\" role=\"tab\" aria-controls=\"nav-payout\" aria-selected=\"true\"  href=\"#\">${ __('Payout') }</a>\n                        <a class=\"nav-link\" id=\"nav-tax-link\" data-bs-toggle=\"tab\" data-bs-target=\"#nav-tax\" type=\"button\" role=\"tab\" aria-controls=\"nav-tax\" aria-selected=\"true\"  href=\"#\">${ __('Tax') }</a>\n                    </div>\n                </nav>\n                <div class=\"card-body tab-content\" id=\"nav-tabContent\">\n                    <div class=\"tab-pane fade show active\" id=\"nav-notifications\" role=\"tabpanel\" aria-labelledby=\"nav-notifications-link\">\n                    <h4 id=\"gen\" class=\"card-title mb-4\">${ __('Notification settings') }</h4>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('New order') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"notify_new_order\" class=\"form-control inp\" name=\"notify_new_order\" data-type=\"select\">\n                                <option value=\"\">${ __('None') }</option>\n                                <option value=\"client\">${ __('Client') }</option>\n                                <option value=\"admin\">${ __('Administrator') }</option>\n                                <option value=\"both\">${ __('Client and administrator') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Admin emails') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"notify_new_order_emails\" type=\"text\" class=\"form-control inp\" name=\"notify_new_order_emails\" data-type=\"emails\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Cancelled order') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"notify_cancel_order\" class=\"form-control inp\" name=\"notify_cancel_order\" data-type=\"select\">\n                                <option value=\"\">${ __('None') }</option>\n                                <option value=\"client\">${ __('Client') }</option>\n                                <option value=\"admin\">${ __('Administrator') }</option>\n                                <option value=\"both\">${ __('Client and administrator') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Admin emails') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"notify_cancel_order_emails\" type=\"text\" class=\"form-control inp\" name=\"notify_cancel_order_emails\" data-type=\"emails\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Processing order') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"notify_proc_order\" class=\"form-control inp\" name=\"notify_proc_order\" data-type=\"select\">\n                                <option value=\"\">${ __('None') }</option>\n                                <option value=\"client\">${ __('Client') }</option>\n                                <option value=\"admin\">${ __('Administrator') }</option>\n                                <option value=\"both\">${ __('Client and administrator') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Admin emails') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"notify_proc_order_emails\" type=\"text\" class=\"form-control inp\" name=\"notify_proc_order_emails\" data-type=\"emails\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Refunded order') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"notify_refunded_order\" class=\"form-control inp\" name=\"notify_refunded_order\" data-type=\"select\">\n                                <option value=\"\">${ __('None') }</option>\n                                <option value=\"client\">${ __('Client') }</option>\n                                <option value=\"admin\">${ __('Administrator') }</option>\n                                <option value=\"both\">${ __('Client and administrator') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Admin emails') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"notify_refunded_order_emails\" type=\"text\" class=\"form-control inp\" name=\"notify_refunded_order_emails\" data-type=\"emails\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Refunded order') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"notify_completed_order\" class=\"form-control inp\" name=\"notify_completed_order\" data-type=\"select\">\n                                <option value=\"\">${ __('None') }</option>\n                                <option value=\"client\">${ __('Client') }</option>\n                                <option value=\"admin\">${ __('Administrator') }</option>\n                                <option value=\"both\">${ __('Client and administrator') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Admin emails') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"notify_completed_order_emails\" type=\"text\" class=\"form-control inp\" name=\"notify_completed_order_emails\" data-type=\"emails\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <br>\n                    <hr>\n                    <br>\n                    <br>\n                    </div>\n                    <div class=\"tab-pane fade\" id=\"nav-currency\" role=\"tabpanel\" aria-labelledby=\"nav-currency-link\">\n                    <h4 id=\"gen\" class=\"card-title mb-4\">${ __('Currency settings') }</h4>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Currency') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"currency\" class=\"form-control inp\" name=\"currency\" data-type=\"select\">\n                              <?php include('inc/select-currencies.php'); ?>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Currency symbol') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"currency_symb\" type=\"text\" class=\"form-control inp\" name=\"currency_symb\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Currency position') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"currency_symb_loc\" class=\"form-control inp\" name=\"currency_symb_loc\" data-type=\"select\">\n                              <option value=\"left\">${ __('Left') }</option>\n                              <option value=\"right\">${ __('Right') }</option>\n                              <option value=\"left_space\">${ __('Left with space') }</option>\n                              <option value=\"right_space\">${ __('Right with space') }</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n\n                      </div>\n                    </div>\n\n                    <br>\n                    <hr>\n                    <br>\n                    <br>\n                    </div>\n                    <div class=\"tab-pane fade\" id=\"nav-tax\" role=\"tabpanel\" aria-labelledby=\"nav-tax-link\">\n                    <h4 id=\"tax\" class=\"card-title mb-4\">${ __('Your tax informatio') }</h4>\n                    <p class=\"card-description\"> ${ __('Invoice info (this information will be not revealed public)') } </p>\n\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Tax ID') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"vat\" type=\"text\" class=\"form-control inp\" name=\"vat\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Email') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"email\" type=\"email\" class=\"form-control inp\" name=\"email\" data-type=\"email\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Company') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"company\" type=\"text\" class=\"form-control inp inp\" name=\"company\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Type') }</label>\n                          <div class=\"col-sm-4\">\n                            <div class=\"form-check\">\n                              <label class=\"form-check-label\">\n                                <input type=\"radio\" class=\"form-check-input inp\" name=\"entity_type\" id=\"entity_type\" value=\"individual\" data-type=\"radio\">\n                                ${ __('Individual') }\n                                <i class=\"input-helper\"></i></label>\n                            </div>\n                          </div>\n                          <div class=\"col-sm-5\">\n                            <div class=\"form-check\">\n                              <label class=\"form-check-label\">\n                                <input type=\"radio\" class=\"form-check-input inp\" name=\"entity_type\" id=\"entity_type\" value=\"business\" data-type=\"radio\">\n                                ${ __('Business') }\n                                <i class=\"input-helper\"></i></label>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <p class=\"card-description\">\n                        ${ __('Address') }\n                    </p>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\"> ${ __('Address 1') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"addr1\" type=\"text\" class=\"form-control inp\" name=\"addr1\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('State') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"state\" type=\"text\" class=\"form-control inp\" name=\"state\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Address 2') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"addr2\" type=\"text\" class=\"form-control inp\" name=\"addr2\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Postcode') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"post\" type=\"text\" class=\"form-control inp\" name=\"post\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('City') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"city\" type=\"text\" class=\"form-control inp\" name=\"city\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Country') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"country\" class=\"form-control inp\" name=\"country\" data-type=\"select\">\n                              <?php include('inc/select-countries.php'); ?>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <br>\n                    <hr>\n                    <br>\n                    <br>\n                    </div>\n                    <div class=\"tab-pane fade\" id=\"nav-payout\" role=\"tabpanel\" aria-labelledby=\"nav-payout-link\">\n                    <h4 id=\"payout\" class=\"card-title mb-4\" title=\"payouts\">${ __('Payout data') }</h4>\n                    <p class=\"card-description\">${ __('This information is used to process your earnings as part of Kenzap Affiliate or Kenzap Designing programs.') }</p>\n\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Bank account holder\\'s name') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"y1\" type=\"text\" class=\"form-control inp\" name=\"y1\" minlength=\"2\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('IBAN/Account Nr.') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"y2\" type=\"text\" class=\"form-control inp\" name=\"y2\" minlength=\"2\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('SWIFT Code') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"y3\" type=\"text\" class=\"form-control inp\" name=\"y3\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Bank name') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"y4\" type=\"text\" class=\"form-control inp\" name=\"y4\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Bank branch city') }</label>\n                          <div class=\"col-sm-9\">\n                            <input id=\"y5\" type=\"text\" class=\"form-control inp\" name=\"y5\" data-type=\"text\">\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"col-lg-6\">\n                        <div class=\"form-group row mb-3 mt-1\">\n                          <label class=\"col-sm-3 col-form-label\">${ __('Bank branch country') }</label>\n                          <div class=\"col-sm-9\">\n                            <select id=\"y6\" class=\"form-control inp\" name=\"y6\" data-type=\"select\">\n                              <?php include('inc/countries.php'); ?>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    </div>\n\n                </div>\n              </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" >   \n      <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n        <div class=\"d-flex\">  \n          <div class=\"toast-body\"></div>\n          <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n        </div>\n      </div>\n    </div>\n    `;\n}\n\nexport const homeContent = (__) => {\n\n    return `\n        <div class=\"container p-edit\">\n            <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n                <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n                \n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n                    <div class=\"card border-white shadow-sm p-sm-3\">\n                        <nav class=\"nav flex-column\">\n                            <a class=\"nav-link active fs-4\" aria-current=\"page\" href=\"/product-list/\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-list-stars me-3\" viewBox=\"0 0 16 16\">\n                            <path fill-rule=\"evenodd\" d=\"M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z\"></path>\n                            <path d=\"M2.242 2.194a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.256-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53z\"></path>\n                            </svg>Product list</a>\n\n                            <hr>\n                                               \n                            <a class=\"nav-link fs-4\" href=\"/orders/\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-cart-check mb-1 me-3\" viewBox=\"0 0 16 16\">\n                            <path d=\"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z\"></path>\n                            <path d=\"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"></path>\n                            </svg>Orders</a>\n\n                            <hr>\n                                                \n                            <a class=\"nav-link fs-4\" href=\"/settings/\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-gear mb-1 me-3\" viewBox=\"0 0 16 16\">\n                            <path d=\"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z\"></path>\n                            <path d=\"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z\"></path>\n                            </svg>Settings</a>\n\n                            <hr>\n                                                \n                            <a class=\"nav-link fs-4 disabled\" href=\"/analytics/\" tabindex=\"-1\" aria-disabled=\"true\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-graph-up me-3\" viewBox=\"0 0 16 16\">\n                            <path fill-rule=\"evenodd\" d=\"M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z\"></path>\n                            </svg>Analytics</a>\n                        </nav>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n}\n\nexport const ordersContent = (__) => {\n\n    return `\n      <div class=\"container ec-orders\">\n        <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-12 page-title\">\n            <div class=\"st-opts st-table mb-3 dropdown\">\n                <a class=\"btn btn-primary dropdown-toggle\" href=\"#\" role=\"button\" id=\"order-status\" data-id=\"status\" data-value=\"all\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                  All\n                </a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"order-status\">\n                  <li><a class=\"dppi dropdown-item\" data-key=\"\" href=\"#\" >All</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"new\" href=\"#\" >New</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"processing\" href=\"#\" >Processing</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"completed\" href=\"#\" >Completed</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"canceled\" href=\"#\" >Canceled</a></li>\n                  <li><a class=\"dppi dropdown-item\" data-key=\"failed\" href=\"#\" >Failed</a></li>\n                </ul>\n            </div>\n            <div class=\"st-opts\" >\n              <div class=\"input-group-sm mb-0 justify-content-start\" >\n                <input id=\"usearch\" type=\"text\" class=\"inp form-control\" placeholder=\"${ __('Search order') }\">\n              </div>\n              <!-- <a id=\"viewSum\" href=\"#\" style=\"margin-left:16px;\">view summary</a> -->\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"card border-white shadow-sm\">\n              <div class=\"card-body\">\n \n                <div class=\"table-responsive\">\n                  <table class=\"table table-hover table-borderless align-middle table-striped table-p-list\">\n                    <thead>\n                      <tr>\n\n                        <th>From</th>\n                        <th>Status</th>\n                        <th>Total</th>\n                        <th>Time</th>\n                        <th></th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"list\">\n\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"modal order-modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog \">\n          <div class=\"modal-content\">\n              <div class=\"modal-header\">\n                <h5 class=\"modal-title\"></h5>\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n              </div>\n              <div class=\"modal-body\">\n              \n              </div>\n              <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary\"></button>\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n              </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\" >   \n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n          <div class=\"d-flex\">  \n            <div class=\"toast-body\"></div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n          </div>\n        </div>\n      </div>\n    `;\n}\n","export const HTMLContent = (__) => {\n\n    return `\n    <div class=\"container\">\n      <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n          <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n          <div>\n            <a style=\"margin-right:16px;\" class=\"preview-link\" target=\"_blank\" href=\"#\">preview <i class=\"mdi mdi-monitor\"></i></a>\n            <button class=\"btn btn-primary btn-publish\" type=\"button\">${ __('Publish') }</button>\n          </div>\n      </div>\n      \n      <div class=\"row\">\n        <div class=\"col-md-5 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"accordion accordion-solid-header sections\" id=\"sections\" role=\"tablist\" style=\"width:100%;\">\n\n                <div class=\"card border-white shadow-sm br nodrag\">\n                    <div class=\"card-header border-white bg-white\" role=\"tab\" id=\"section0\">\n                        <h6 class=\"mb-0\"> \n                          <a data-bs-toggle=\"collapse\" href=\"#collapses\" data-section=\"s\" aria-expanded=\"false\" aria-controls=\"collapses\" class=\"secos collapsed text-dark\">Page Settings<div id=\"page_template\"></div> </a>\n                        </h6>\n                    </div>\n                    <div id=\"collapses\" class=\"collapse\" role=\"tabpanel\" aria-labelledby=\"sections\" data-parent=\"#sections\">\n                        <div class=\"card-body\">\n                            <div class=\"controls\">\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">Page title</label>\n                                            <div class=\"col-sm-12\">\n                                                <input id=\"ptitle\" type=\"text\" data-key=\"heading\" data-type=\"text\"\n                                                    class=\"text-input form-control inps\" value=\"\" name=\"ptitle\">\n                                                <p class=\"form-text mt-2\">Used by search engines and browsers</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">Description</label>\n                                            <div class=\"col-sm-12\">\n                                                <textarea id=\"pdesc\" type=\"text\" data-key=\"info1_desc\" data-type=\"text\"\n                                                    class=\"text-input form-control inps\"\n                                                    value=\"Various versions have evolved over the years, sometimes by accident.\"\n                                                    name=\"pdesc\" rows=\"4\"></textarea>\n                                                <p class=\"form-text mt-2\">Used by search engines and browsers</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-12 col-form-label\">Heading font</label>\n                                            <div class=\"col-sm-6\">\n                                                <select id=\"font_heading\" class=\"font-input text-input form-control\">\\\n\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_heading_type\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"sans-serif\">Sans Serif</option>\n                                                    <option value=\"serif\">Serif</option>\n                                                    <option value=\"monospace\">Monospace</option>\n                                                </select>\n                                                <!-- <input id=\"heading_type\" type=\"text\" data-type=\"text\" class=\"text-input form-control inps\" value=\"\" name=\"heading_type\"> -->\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_heading_weight\"\n                                                    class=\"font-input text-input form-control\">\\\n                                                    <option value=\"100\">100</option>\n                                                    <option value=\"200\">200</option>\n                                                    <option value=\"300\">300</option>\n                                                    <option value=\"400\">400</option>\n                                                    <option value=\"500\">500</option>\n                                                    <option value=\"600\">600</option>\n                                                    <option value=\"700\">700</option>\n                                                    <option value=\"800\">800</option>\n                                                </select>\n                                                <!-- <input id=\"heading_weight\" type=\"text\" data-type=\"text\" class=\"text-input form-control inps\" value=\"\" name=\"heading_weight\"> -->\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-12 col-form-label\">Body font</label>\n                                            <div class=\"col-sm-6\">\n                                                <select id=\"font_body\" class=\"font-input text-input form-control\">\\\n\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_body_type\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"sans-serif\">Sans Serif</option>\n                                                    <option value=\"serif\">Serif</option>\n                                                    <option value=\"monospace\">Monospace</option>\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_body_weight\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"100\">100</option>\n                                                    <option value=\"200\">200</option>\n                                                    <option value=\"300\">300</option>\n                                                    <option value=\"400\">400</option>\n                                                    <option value=\"500\">500</option>\n                                                    <option value=\"600\">600</option>\n                                                    <option value=\"700\">700</option>\n                                                    <option value=\"800\">800</option>\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">CSS Rules</label>\n                                            <div class=\"col-sm-12\">\n                                                <textarea id=\"css_rules\" data-key=\"css_rules\" data-type=\"css_rules\"\n                                                    class=\"csseditor-input form-control w-400\" name=\"css_rules\"> </textarea>\n                                                <p class=\"form-text mt-2\">Add custom CSS rules to adjust visual look\n                                                    of the page.</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <button type=\"button\" data-toggle=\"modal\" data-target=\"#layouts\" class=\"btn add-layout btn-outline-primary mt-2 nodrag\">Add Layout</button>\n            </div>\n        </div>\n        <div class=\"col-md-7 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card preview border-white shadow-sm \">\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\"></h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\"\n            aria-atomic=\"true\" data-bs-delay=\"3000\">\n            <div class=\"d-flex\">\n                <div class=\"toast-body\"></div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"\n                    aria-label=\"Close\"></button>\n            </div>\n        </div>\n    </div>\n    `;\n}","// js dependencies\nimport { getSiteId, timeConverterAgo, simulateClick, getCookie, parseApiError, onClick, onChange, initBreadcrumbs, toast, link } from \"../_/_helpers.js\"\nimport { showLoader, hideLoader, initHeader, initFooter } from \"../_/_ui.js\"\nimport { HTMLContent } from \"../_/_cnt_page_edit.js\"\n\n// where everything happens\nconst _this = {\n\n    state: {\n        xhr: null,\n        firstLoad: true,\n        domain: '',\n        page_template: \"universal\",\n        changes: false,\n        page_meta: {},\n        dataAPI: null,\n        data: null,\n        mode: 'production',\n        http_source: 'desktop',\n        timer: null,\n        dragulaInit: false\n    },\n    init: () => {\n        \n        _this.getData(); \n        _this.getAPIData();\n    },\n    getAPIData: () => {\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"get_site_data\");\n        params.append(\"id\", getSiteId());\n        params.append(\"fl\", _this.getPageSlug());\n        params.append(\"mode\", _this.state.mode);\n        params.append(\"source\", 'pages');\n        params.append(\"token\", getCookie('kenzap_token'));\n\n        // do API query\n        fetch('https://siteapi.kenzap.cloud/v1/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(), \n            }, \n            body: params\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            // hideLoader();\n\n            if(response.success){\n\n                _this.state.dataAPI = response;\n\n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'text/plain',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(), \n            },\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        id:         getCookie('lang')\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            _this.state.data = response;\n\n            // hide UI loader\n            // hideLoader();\n            \n            if(response.success){\n\n                // init header\n                initHeader(response);\n                \n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    startRender: () => {\n\n        // only start when both apis have loaded\n        if(_this.state.data == null || _this.state.dataAPI == null) return;\n\n        // load dependencies\n        if(_this.state.firstLoad){\n\n            _this.laodScript('https://code.jquery.com/jquery-3.6.0.min.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls/dragula.min.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls-v2.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls/ace.min.js');  \n        }\n\n        // get core html content \n        _this.loadPageStructure();  \n\n        // render table\n        setTimeout(function(){ _this.renderPage(); },2000);\n\n        // bind content listeners\n        _this.initListeners();\n    \n        // initiate footer\n        _this.initFooter();\n\n        // first load\n        _this.state.firstLoad = false;\n\n    },\n    renderPage: () => {\n\n        hideLoader();\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('/'), text: __('Dashboard') },\n                { link: link('/pages/'), text: __('Pages') },\n                { text: __('Edit page') },\n            ]\n        );\n\n        // bind data\n        Controls.page = _this.state.dataAPI.data;\n\n        // get public domain\n        _this.state.domain = _this.state.dataAPI.domain;\n\n        // preview\n        _this.preview();\n        \n        // page settings\n        _this.loadPageSettings();\n\n        // TODO mobile app\n        // if(_this.http_source!=\"mobile\") initBreadcrumbs('sites/site/pages/',[{'text':Controls.page.title}]);\n          \n        // website preview link\n        d.querySelector('.preview-link').setAttribute('href', \"http://\"+_this.state.domain+\"/\"+_this.getPageSlug()+\"/?\"+(Math.round(new Date().getTime()/1000)));\n\n        // init sections\n        _this.initSections();\n    },\n    preview: () => {\n\n        // stop if no preview window present (mobile app version)\n        if(!document.querySelector('.preview')) return;\n\n        let url = \"https://preview.kenzap.cloud/S\"+getSiteId()+\"/_site\";\n        // if(mode == 'production' && domain != undefined) url = 'https://'+domain;\n\n        let slug = _this.getPageSlug();\n        let iframe = document.querySelector('.preview iframe');\n        let src = url+'/'+slug+'/?rand='+ (+ new Date());\n        if(!iframe){\n\n            document.querySelector('.preview').innerHTML = '<iframe src=\"'+src+'\" class=\"card br iload\" style=\"width:100%;border:none;height:100%;min-height:600px;border-radius:4px;\" ></iframe>'\n        }else{\n\n            document.querySelector('.preview iframe').setAttribute('src', src);\n            // $(\".preview iframe\").attr('src', src);\n        }\n        setTimeout(function(){ document.querySelector('.preview iframe').classList.remove('iload'); }, 1000); // $(\".preview iframe\").removeClass('iload'); \n    },\n    loadPageSettings: () => {\n\n        let d = document;\n\n        // bind page settings \n        d.querySelector(\"#ptitle\").value = Controls.page.title;\n        d.querySelector(\"#pdesc\").value = Controls.page.description;\n        d.querySelector(\"#page_template\").value = Controls.page.template+\" template\"; _this.state.page_template = Controls.page.template;\n\n        // live update breadcrumb\n        // $(\"#ptitle\").keyup(function(){ Controls.page.title = this.value; $(\".breadcrumb-item.active\").html(this.value); controlsUpdates(); });\n        // $(\"#pdesc\").keyup(function(){ console.log(this.value); Controls.page.description = this.value; controlsUpdates(); });\n    \n        // console.log(Controls.page.typography.heading.font.value);\n        if(Controls.page.typography == undefined) Controls.page.typography = JSON.parse(\"{\\\"title\\\":\\\"Fonts\\\",\\\"hint\\\":\\\"Font pairs, typography settings.\\\",\\\"heading\\\":{\\\"font\\\":{\\\"title\\\":\\\"Font\\\",\\\"input\\\":\\\"font\\\",\\\"value\\\":\\\"Poppins\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"type\\\":{\\\"title\\\":\\\"Type\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"serif\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"weight\\\":{\\\"title\\\":\\\"Weight\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"600\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"}},\\\"body\\\":{\\\"font\\\":{\\\"title\\\":\\\"Font\\\",\\\"input\\\":\\\"font\\\",\\\"value\\\":\\\"Poppins\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"type\\\":{\\\"title\\\":\\\"Type\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"sans-serif\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"weight\\\":{\\\"title\\\":\\\"Weight\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"400\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"}}}\");\n        if(Controls.page.cssrules == undefined){ Controls.page.cssrules = {}; }\n\n        d.querySelector(\"#font_heading\").value = Controls.page.typography.heading.font.value;\n        d.querySelector(\"#font_heading_type\").value = Controls.page.typography.heading.type.value;\n        d.querySelector(\"#font_heading_weight\").value = Controls.page.typography.heading.weight.value;\n\n        d.querySelector(\"#font_body\").value = Controls.page.typography.body.font.value;\n        d.querySelector(\"#font_body_type\").value = Controls.page.typography.body.type.value;\n        d.querySelector(\"#font_body_weight\").value = Controls.page.typography.body.weight.value;\n\n        if(Controls.page.cssrules.value !== undefined){ d.querySelector(\"#css_rules\").value = Controls.page.cssrules.value; }\n\n        onChange('.font_heading', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.font.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_heading_type', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.type.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_heading_weight', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.weight.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n\n\n        onChange('.font_body', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.font.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_body_type', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.type.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_body_weight', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.weight.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        // load font list\n        fetch('https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBwIX97bVWr3-6AIUvGkcNnmFgirefZ6Sw', {\n            method: 'get',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n            }\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            let js = response;\n            let flist = ''; for (let f in js.items) { flist += '<option value=\"' + js.items[f].family + '\">' + js.items[f].family + '</option>'; }\n\n            document.querySelector(\"#font_heading\").innerHTML = flist;\n            document.querySelector(\"#font_body\").innerHTML = flist;\n            document.querySelector('#font_heading [value=\"' + _this.state.dataAPI.data.typography.heading.font.value + '\"]').selected = true;\n            document.querySelector('#font_body [value=\"' + _this.state.dataAPI.data.typography.body.font.value + '\"]').selected = true;\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    controlsUpdates: () => {\n\n        // console.log('controlsUpdates');\n        // console.log(Controls.obj);\n\n        if(Controls.obj){\n\n          let action = Controls.obj.action;\n\n          // console.log(action);\n          switch(action){\n\n            case 'section-moveup': _this.state.changes = true; _this.initSections(); break;\n            case 'section-movedown': _this.state.changes = true; _this.initSections(); break;\n            case 'section-copy': _this.state.changes = true; _this.initSections(); break;\n            case 'section-remove': _this.state.changes = true; _this.initSections(); break;\n            case 'edit': _this.state.changes = true; break;\n            case 'copy': _this.state.changes = true; break;\n            case 'remove': _this.state.changes = true; break;\n          }\n        }\n    \n        // if(_this.state.changes && window.location.href.indexOf(\"#\")==-1){ history.pushState({pageID: 'pages'}, 'Cloud', window.location.pathname + \"#changes\"); }\n        if(_this.state.timer) clearTimeout(_this.state.timer);\n\n        _this.state.timer = setTimeout(function(){\n    \n          if(Controls.page) _this.setSiteData({mode: \"preview\", section: \"\", data: Controls.page});\n          \n        }, 1000);\n    },\n    initSections: () => {   \n        \n        // clear any previous sections\n        // document.querySelector('.sections > .card.lay').remove();\n        document.querySelectorAll('.sections > .card.lay').forEach(e => e.remove());\n\n        // $(\".sections > .card.lay\").remove();\n\n        // initialize sections and load layout editing controls\n        Controls.init(\".sections\", Controls.page, _this.controlsUpdates, 'sections');\n    \n        // activate sections drag and drop events\n        _this.initDragula();\n    },\n    initDragula: () => {\n\n        if(_this.state.dragulaInit) return;\n    \n        console.log(\"initDragula\");\n        _this.state.dragulaInit = true;\n        let drag = dragula([document.querySelector('.sections')],{\n    \n            // direction: 'vertical',\n            moves: function (el, source, handle, sibling) {\n                if(_this.state.http_source==\"mobile\") { return false; }\n                return el.classList.contains('lay') && el.querySelector('[data-bs-toggle=\"collapse\"]').classList.contains('collapsed');\n            },\n            accepts: function (el, target, source, sibling) {\n                return true;\n            }\n        });\n    \n        drag.on('drop', function(el) {\n        \n            console.log(\"drop\");\n            // dataGG = JSON.parse(JSON.stringify(dataG));\n            let i = 0;\n            let temp = JSON.parse(JSON.stringify(Controls.page));\n\n            document.querySelectorAll('.sections .seco').forEach( (e) => { \n                \n                let ind = e.currentTarget.dataset.section;\n                Controls.page.sections[i] = temp.sections[ind];\n                \n                console.log(ind +\" \"+i);\n                i++;   \n            });\n\n            // $( \".sections .seco\" ).each(function() {\n        \n            //     let ind = this.dataset.section;\n            //     Controls.page.sections[i] = temp.sections[ind];\n                \n            //     console.log(ind +\" \"+i);\n            //     i++;    \n            // });\n        \n            // reassign section indexes\n            _this.setSiteData({mode: \"preview\", section: \"\", data: Controls.page});\n        \n            _this.initSections();\n        });\n    },\n    setSiteData: (obj) => {\n      \n        // console.log(obj);\n        // return;\n        if(obj.mode == 'production'){ showLoader(); }\n    \n        $(\".preview iframe\").addClass('iload');\n        if(_this.state.xhr) _this.state.xhr.abort();\n        _this.state.xhr = $.post(\"https://siteapi.kenzap.cloud/v1/\", { cmd: 'set_site_data', id: getSiteId(), fl: _this.getPageSlug(), page_meta: _this.state.page_meta, mode: _this.state.mode, section: obj.section, source: 'pages', data: obj.data, mode: obj.mode, token: getCookie('kenzap_token') }, function(data, status){\n    \n            // alert(JSON.stringify(data));\n            // $( \"#loader\" ).fadeOut( \"fast\" ); \n            \n            if(data.success){\n    \n                _this.state.changes = false;\n    \n                // notify\n                if(obj.mode == 'production'){ \n\n                    toast(__('Latest changes are now online.'));\n                }\n    \n                hideLoader();\n\n                // refresh preview\n                _this.preview();\n    \n            }else{\n    \n                parseError(data);\n            }\n    \n        },'json');\n    },\n    rowStruct: (i) => {\n\n        return `\n        <tr>\n          <td class=\"destt\" style=\"max-width:250px;min-width:250px;\">\n            <div>\n              <a class=\"text-dark\" href=\"/edit-page/?id=${ _this.state.dataAPI.list[i].key + '&sid='+getSiteId() }\" ><b>${ _this.state.dataAPI.list[i].title }</b><i style=\"color:#9b9b9b;font-size:15px;margin-left:8px;\" title=\"Edit page\" class=\"mdi mdi-pencil menu-icon edit-page\"></i></a>\n            </div>\n          </td>\n          <td>\n            <span>${ _this.getStatus(_this.state.dataAPI.list[i].status) }</span>\n          </td>\n          <td class=\"\">\n            <span>${ timeConverterAgo( _this.state.data.meta.time, _this.state.dataAPI.list[i].time ) }</span>\n          </td>\n          <td>\n            <div class=\"d-flex justify-content-end\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" data-kid='${ _this.state.dataAPI.list[i].key }' data-key=\"${ _this.state.dataAPI.list[i].key }\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash set-home me-3 ${ _this.state.dataAPI.list[i].key == _this.state.dataAPI.home? 'text-primary':'text-secondary' }\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z\"/>\n                </svg>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" data-kid='${ _this.state.dataAPI.list[i].key }' data-key=\"${ _this.state.dataAPI.list[i].key }\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash text-danger remove-page\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                </svg>\n            </div>\n          </td>\n        </tr>`;\n    },\n    getPageSlug: () => {\n\n        let urlParams = new URLSearchParams(window.location.search);\n        let slug = urlParams.get('slug') ? urlParams.get('slug') : \"\";\n        return slug;\n\n        // return 'about-us';\n\n        // let url = new URL(window.location.href);\n        // let id = url.pathname.trim().split('/').slice(-3)[0];\n        // return id;\n    },\n    getType: (t) => {\n\n        let html = '';\n        switch(t){\n            case 'admin':\n                html = '<div title=\"Administrator\" class=\"badge bg-danger fw-light\">Administrator</div>';\n            break;\n            case 'editor':\n                html = '<div title=\"Editor\" class=\"badge bg-primary fw-light\">Editor</div>';\n            break;\n            case 'viewer':\n                html = '<div title=\"Viewer\" class=\"badge bg-success fw-light\">Viewer</div>';\n            break;\n        }\n        return html;\n    },\n    initHeader: (response) => {\n\n        onClick('.nav-back', (e) => {\n\n            e.preventDefault();\n            console.log('.nav-back');\n            let link = document.querySelector('.bc ol li:nth-last-child(2)').querySelector('a');\n            simulateClick(link);\n        });\n    },\n    initListeners: () => {\n\n        console.log('initListeners');\n\n        // actions listeners\n        // onClick('.acc2', _this.listeners.actions);\n\n        // set as home page\n        // onClick('.set-home', _this.listeners.setHome);\n\n        if(!_this.state.firstLoad) return;\n\n        // add user button\n        onClick('.btn-publish', _this.listeners.publish);\n\n        // add layout button\n        onClick('.add-layout', _this.listeners.addLayout);\n\n        // add modal confirm button\n        onClick('.btn-modal', _this.listeners.modalSuccessBtn);\n    },\n    listeners: {\n\n        // actions: (e) => {\n\n        //     let modal = document.querySelector(\".modal\");\n        //     let modalCont = new bootstrap.Modal(modal);\n        //     modal.querySelector(\".modal-dialog\").style.maxWidth = '500px';\n            \n        //     modal.querySelector(\".modal-title\").innerHTML = __('Action');\n        //     modal.querySelector(\".btn-primary\").style.display = 'none';\n        //     modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n        //     let html = '\\\n        //     <nav id=\"context-menu\" class=\"context-menu\">\\\n        //       <ul class=\"context-menu__items\">\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"moveup\">\\\n        //             Move Up <i class=\"mdi mdi-arrow-up\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"movedown\">\\\n        //             Move Down <i class=\"mdi mdi-arrow-down\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"copy\">\\\n        //             Duplicate <i class=\"mdi mdi-content-duplicate\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"settings\" >\\\n        //             Advanced <i class=\"mdi mdi-brush\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"remove\">\\\n        //             Delete <i class=\"mdi mdi-trash-can-outline \"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //       </ul>\\\n        //     </nav>';\n\n        //     modal.querySelector(\".modal-body\").innerHTML = html;\n            \n        //     modalCont.show();\n        // },\n        publish: (e) => {\n            \n            if(document.querySelector(\"#ptitle\").value.length<1){ alert(__('Please enter page title to save changes.')); return false; }\n    \n            e.preventDefault();\n\n            // mode = (this.dataset.mode!=undefined)?this.dataset.mode:\"production\";\n            if(Controls.page) _this.setSiteData({mode: \"production\", section: \"\", data: Controls.page});\n        },\n        addLayout: (e) => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            modal.querySelector(\".modal-dialog\").style.maxWidth = '700px';\n            let CDN2 = 'https://static.kenzap.com';\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Add layout');\n            modal.querySelector(\".btn-primary\").style.display = 'none';\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            showLoader();\n\n            // init params\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"preview_sections\");\n            params.append(\"template\", 'page_template');\n            params.append(\"token\", getCookie('kenzap_token'));\n    \n            // do API query\n            fetch('https://siteapi.kenzap.cloud/v1/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                // hide UI loader\n                hideLoader();\n\n                if(response.success){\n\n                    Controls.layouts = response;\n                    let html = '';\n                    html += '<div class=\"row\">';\n                    for (let key in response.res) {\n        \n                        html += '<div class=\"col-md-6\" style=\"margin:16px 0;\">';\n                        html += '<h4>'+response.res[key]['meta']['title'];\n                        html += '<div class=\"br-wrapper br-theme-css-stars\"><select id=\"profile-rating\" name=\"rating\" autocomplete=\"off\" style=\"display: none;\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option></select><div class=\"br-widget\"><a href=\"#\" data-rating-value=\"1\" data-rating-text=\"1\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"2\" data-rating-text=\"2\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"3\" data-rating-text=\"3\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"4\" data-rating-text=\"4\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"5\" data-rating-text=\"5\" class=\"br-selected br-current\"></a></div></div>';\n                        html += '</h4>';\n                        html += '<img alt=\"'+response.res[key]['meta']['title']+'\" style=\"max-width:100%;\" src=\"'+CDN2+'/preview/'+response.res[key]['template']+'-'+response.res[key]['meta']['slug']+'-600.jpeg?'+response.res[key]['meta']['updated']+'\" />';\n                        html += '<a class=\"sclick csection\" data-index=\"'+key+'\" >Choose this section</a>';\n                        html += '</div>';\n                    }\n                    html += '</div>';\n\n                    modal.querySelector(\".modal-body\").innerHTML = html;\n\n                    onClick('.sclick', _this.listeners.sectionClick);\n\n                }else{\n\n                    simulateClick( simulateClick(document.querySelector('.modal .btn-close')) );\n                    toast(__('No available layouts found.'));\n                    // parseApiError(response);\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n\n            modalCont.show();\n        },\n        sectionClick: (e) => {\n\n            simulateClick(document.querySelector('.modal .btn-close'));\n            // $(\"#close-layouts\").trigger('click');\n\n            let layout = Controls.layouts.res[e.currentTarget.dataset.index]['extra'];\n            let layout_id = Controls.layouts.res[e.currentTarget.dataset.index]['id'];\n            if(Controls.page.sections == undefined) Controls.page.sections = [];\n            console.log(Controls.page);\n            Controls.page.sections.push(layout);\n            // console.log(dataG);\n            // console.log(layout);\n\n            // preload layout\n            $.post(\"https://siteapi.kenzap.cloud/v1/\", { cmd: 'preload_layout', id: getSiteId(), layout_id: layout_id, token: getCookie('kenzap_token') }, function(data, status){\n\n                if(data.success){\n\n                    _this.controlsUpdates();\n                    // refresh preview\n                    // preview();\n                    // console.log(\"preview\");\n                }else{\n\n                    parseError(data);\n                }\n            },'json');\n\n            // refresh sections \n            _this.initSections();   \n        },\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n        modalSuccessBtnFunc: null\n    },\n    getStatus: (st) => {\n\n        st = parseInt(st);\n        switch(st){\n          case 0: return '<div class=\"badge bg-warning\">Draft</div>';\n          case 1: return '<div class=\"badge bg-primary\">Published</div>';\n          case 3: return '<div class=\"badge bg-danger\">Unpublished</div>';\n          default: return '<div class=\"badge bg-warning text-dark\">Drafts</div>';\n        }\n    },\n    laodScript: (script) => {\n\n        // if(tab4Loaded) return;\n        let sjs = document.createElement(\"script\");\n        sjs.setAttribute(\"src\", script+\"?\"+(new Date().getTime()));\n        document.body.appendChild(sjs);\n        // tab4Loaded = true;\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n    initFooter: () => {\n        \n        initFooter(__('Copyright  '+new Date().getFullYear()+' <a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">Kenzap</a>. All rights reserved.'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();\n"],"names":["link","slug","urlParams","URLSearchParams","window","location","search","sid","get","postfix","indexOf","getSiteId","id","getCookie","cname","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","parseApiError","data","code","href","alert","reason","initBreadcrumbs","html","bc","text","querySelector","innerHTML","simulateClick","elem","evt","MouseEvent","bubbles","cancelable","view","dispatchEvent","onClick","sel","fn","querySelectorAll","e","removeEventListener","addEventListener","onChange","timeConverterAgo","now","time","console","log","parseInt","past","a","Date","months","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","toast","insertAdjacentHTML","bootstrap","Toast","show","initHeader","response","header","localStorage","setItem","child","createElement","getItem","firstChild","body","prepend","Function","call","locale","i18n","init","showLoader","el","style","display","hideLoader","initFooter","left","right","HTMLContent","__","_this","state","xhr","firstLoad","domain","page_template","changes","page_meta","dataAPI","mode","http_source","timer","dragulaInit","getData","getAPIData","params","append","getPageSlug","fetch","method","headers","hasOwnProperty","then","json","success","startRender","error","JSON","stringify","query","user","type","fields","token","laodScript","loadPageStructure","setTimeout","renderPage","initListeners","d","Controls","page","preview","loadPageSettings","setAttribute","Math","round","getTime","initSections","url","iframe","src","classList","remove","value","title","description","template","typography","undefined","parse","cssrules","heading","font","weight","preventDefault","currentTarget","controlsUpdates","js","flist","f","items","family","selected","obj","action","clearTimeout","setSiteData","section","forEach","initDragula","drag","dragula","moves","source","handle","sibling","contains","accepts","target","on","temp","ind","dataset","sections","$","addClass","abort","post","cmd","fl","status","parseError","rowStruct","list","key","getStatus","meta","home","getType","t","listeners","publish","addLayout","modalSuccessBtn","modal","modalCont","Modal","maxWidth","CDN2","layouts","res","sectionClick","layout","index","layout_id","push","modalSuccessBtnFunc","st","script","sjs","appendChild"],"mappings":"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"}