{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_helpers.js","../../src/_/_cnt_page_edit.js","../../src/edit-page/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","export const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\nexport const getProductId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('id') ? urlParams.get('id') : \"\";\n    return id;\n}\n\nexport const getProductIdFromLink = () => {\n    \n    let url = new URL(window.location.href);\n    let id = url.pathname.trim().split('/').slice(-2)[0];\n    return id;\n}\n\nexport const getPageNumber = () => {\n\n    let url = window.location.href.split('/');\n    let page = url[url.length-1];\n    let pageN = 1;\n    if(page.indexOf('page')==0){\n      pageN = page.replace('page', '').replace('#', '');\n    }\n    // console.log(pageN);\n    return parseInt(pageN);\n}\n\nexport const getPagination = (meta, cb) => {\n\n    if(typeof(meta) === 'undefined'){ document.querySelector(\"#listing_info\").innerHTML = 'no records to display'; return; }\n\n    let offset = meta.limit+meta.offset;\n    if(offset>meta.total_records) offset = meta.total_records;\n\n    document.querySelector(\"#listing_info\").innerHTML = \"Showing \"+(1+meta.offset)+\" to \"+(offset)+\" of \"+meta.total_records+\" entries\";\n\n    let pbc = Math.ceil(meta.total_records / meta.limit);\n    // console.log(pbc);\n    document.querySelector(\"#listing_paginate\").style.display = (pbc < 2) ? \"none\" : \"block\";\n\n    // page 1 \n\n    // page 3\n    // 1 2\n\n    // page 5\n    // 2 3 4 .. \n\n    let page = getPageNumber(); \n    let html = '<ul class=\"pagination d-flex justify-content-end pagination-flat\">';\n    html += '<li class=\"paginate_button page-item previous\" id=\"listing_previous\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"prev\" data-page=\"0\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&laquo;</span></li>';\n    let i = 0;\n    while(i<pbc){\n\n        i++; \n        if(((i >= page-3) && (i <= page)) || ((i <= page+3) && (i >=page))){\n\n            html += '<li class=\"paginate_button page-item '+((page==i)?'active':'')+'\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"page\" data-page=\"'+i+'\" tabindex=\"0\" class=\"page-link\">'+(page==i?'..':i)+'</a></li>';      \n        }\n    }  \n    html += '<li class=\"paginate_button page-item next\" id=\"order-listing_next\"><a href=\"#\" aria-controls=\"order-listing\" data-type=\"next\" data-page=\"2\" tabindex=\"0\" class=\"page-link\"><span aria-hidden=\"true\">&raquo;</span></a></li>';\n    html += '</ul>'\n\n    document.querySelector(\"#listing_paginate\").innerHTML = html;\n\n    let page_link = document.querySelectorAll(\".page-link\");\n    for (const l of page_link) {\n        l.addEventListener('click', function(e) {\n\n            let p = parseInt(getPageNumber());\n            let ps = p;\n            switch(l.dataset.type){ \n                case 'prev': p-=1; if(p<1) p = 1; break;\n                case 'page': p=l.dataset.page; break;\n                case 'next': p+=1; if(p>pbc) p = pbc; break;\n            }\n            \n            // update url\n            if (window.history.replaceState) {\n\n                let url = window.location.href.split('/page');\n                let urlF = (url[0]+'/page'+p).replace('//page', '/page');\n\n                // prevents browser from storing history with each change:\n                window.history.replaceState(\"kenzap-cloud\", document.title, urlF);\n            }\n\n            // only refresh if page differs\n            if(ps!=p) cb();\n            \n            e.preventDefault();\n            return false;\n        });\n    }\n}\n\nexport const formatStatus = (st) => {\n\n    st = parseInt(st); \n    switch(st){ \n      case 0: return '<div class=\"badge bg-warning text-dark fw-light\">Draft</div>';\n      case 1: return '<div class=\"badge bg-primary fw-light\">Published</div>';\n      case 3: return '<div class=\"badge bg-secondary fw-light\">Unpublished</div>';\n      default: return '<div class=\"badge bg-secondary fw-light\">Drafts</div>';\n    }\n}\n\nexport const formatPrice = (price) => {\n\n    const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: \"USD\", });\n    if(typeof(price) === 'undefined' || price == '') price = 0;\n    price = parseFloat(price);\n    price = formatter.format(price);\n    return price;\n}\n\nexport const formatTime = (timestamp) => {\n\t\n    let a = new Date(timestamp * 1000);\n    let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    let year = a.getFullYear();\n    let month = months[a.getMonth()];\n    let date = a.getDate();\n    let hour = a.getHours();\n    let min = a.getMinutes();\n    let sec = a.getSeconds();\n    let time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n// parse backend error to frontend\nexport const parseApiError = (data) => {\n\n    // alert(data.reason);\n    // return; \n    switch(data.code){\n\n        // for user to resignin\n        // case 401: location.href=\"https://auth.kenzap.com/?redirectF.php?referral=\"+window.location.href; break;\n        case 401: if(window.location.href.indexOf('localhost')!=-1){ alert('Please update user token'); }else{ location.href='https://auth.kenzap.com/?app=65432108792785&redirect='+window.location.href; } break;\n        default: alert(data.reason); break;\n    }\n}\n\n// init breadcrumbs navigation\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * Simulate a click event.\n * @public\n * @param {Element} elem  the element to simulate a click on\n */\n export const simulateClick = (elem) => {\n     \n\t// Create our event (with options)\n\tvar evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\t// If cancelled, don't dispatch our event\n\tvar canceled = !elem.dispatchEvent(evt);\n};\n\n// nums only validation\nexport const numsOnly = (e, max) => {\n\n    // Only ASCII charactar in that range allowed \n    var ASCIICode = (e.which) ? e.which : e.keyCode \n    if (ASCIICode > 31 && ASCIICode != 46 && (ASCIICode < 48 || ASCIICode > 57)) \n    return false; \n\n    if(parseFloat(e.target.value)>max) \n    return false; \n\n    let dec = e.target.value.split('.');\n    if(dec.length>1)\n    if(dec[1].length>1)\n        return false;\n    \n    return true; \n}\n\nexport const onClick = (sel, fn) => {\n\n    // console.log('onClick');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\nexport const onChange = (sel, fn) => {\n\n    // console.log('onChange');\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n// time elapsed since creation \nexport const timeConverterAgo = (now, time) => {\n\n    console.log(now + \" \" + time);\n\n    now = parseInt(now);\n    time = parseInt(time);\n\n    console.log(now + \" \" + time);\n\n    // parse as elapsed time\n    let past = now - time;\n    if(past < 60) return 'moments ago';\n    if(past < 3600) return parseInt(past / 60) + ' minutes ago';\n    if(past < 86400) return parseInt(past / 60 / 24) + ' hours ago';\n\n    // process as normal date\n    var a = new Date(time * 1000);\n    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var hour = a.getHours();\n    var min = a.getMinutes();\n    var sec = a.getSeconds();\n    var time = date + ' ' + month + ' ' + year; // + ' ' + hour + ':' + min + ':' + sec ;\n    return time;\n}\n\nexport const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","export const HTMLContent = (__) => {\n\n    return `\n    <div class=\"container\">\n      <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n          <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n          <div>\n            <a style=\"margin-right:16px;\" class=\"preview-link\" target=\"_blank\" href=\"#\">preview <i class=\"mdi mdi-monitor\"></i></a>\n            <button class=\"btn btn-primary btn-publish\" type=\"button\">${ __('Publish') }</button>\n          </div>\n      </div>\n      \n      <div class=\"row\">\n        <div class=\"col-md-5 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n            <div class=\"accordion accordion-solid-header sections\" id=\"sections\" role=\"tablist\" style=\"width:100%;\">\n\n                <div class=\"card border-white shadow-sm br nodrag\">\n                    <div class=\"card-header border-white bg-white\" role=\"tab\" id=\"section0\">\n                        <h6 class=\"mb-0\"> \n                          <a data-bs-toggle=\"collapse\" href=\"#collapses\" data-section=\"s\" aria-expanded=\"false\" aria-controls=\"collapses\" class=\"secos collapsed text-dark\">Page Settings<div id=\"page_template\"></div> </a>\n                        </h6>\n                    </div>\n                    <div id=\"collapses\" class=\"collapse\" role=\"tabpanel\" aria-labelledby=\"sections\" data-parent=\"#sections\">\n                        <div class=\"card-body\">\n                            <div class=\"controls\">\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">Page title</label>\n                                            <div class=\"col-sm-12\">\n                                                <input id=\"ptitle\" type=\"text\" data-key=\"heading\" data-type=\"text\"\n                                                    class=\"text-input form-control inps\" value=\"\" name=\"ptitle\">\n                                                <p class=\"form-text mt-2\">Used by search engines and browsers</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">Description</label>\n                                            <div class=\"col-sm-12\">\n                                                <textarea id=\"pdesc\" type=\"text\" data-key=\"info1_desc\" data-type=\"text\"\n                                                    class=\"text-input form-control inps\"\n                                                    value=\"Various versions have evolved over the years, sometimes by accident.\"\n                                                    name=\"pdesc\" rows=\"4\"></textarea>\n                                                <p class=\"form-text mt-2\">Used by search engines and browsers</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-12 col-form-label\">Heading font</label>\n                                            <div class=\"col-sm-6\">\n                                                <select id=\"font_heading\" class=\"font-input text-input form-control\">\\\n\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_heading_type\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"sans-serif\">Sans Serif</option>\n                                                    <option value=\"serif\">Serif</option>\n                                                    <option value=\"monospace\">Monospace</option>\n                                                </select>\n                                                <!-- <input id=\"heading_type\" type=\"text\" data-type=\"text\" class=\"text-input form-control inps\" value=\"\" name=\"heading_type\"> -->\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_heading_weight\"\n                                                    class=\"font-input text-input form-control\">\\\n                                                    <option value=\"100\">100</option>\n                                                    <option value=\"200\">200</option>\n                                                    <option value=\"300\">300</option>\n                                                    <option value=\"400\">400</option>\n                                                    <option value=\"500\">500</option>\n                                                    <option value=\"600\">600</option>\n                                                    <option value=\"700\">700</option>\n                                                    <option value=\"800\">800</option>\n                                                </select>\n                                                <!-- <input id=\"heading_weight\" type=\"text\" data-type=\"text\" class=\"text-input form-control inps\" value=\"\" name=\"heading_weight\"> -->\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-12 col-form-label\">Body font</label>\n                                            <div class=\"col-sm-6\">\n                                                <select id=\"font_body\" class=\"font-input text-input form-control\">\\\n\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_body_type\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"sans-serif\">Sans Serif</option>\n                                                    <option value=\"serif\">Serif</option>\n                                                    <option value=\"monospace\">Monospace</option>\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                            <div class=\"col-sm-3\">\n                                                <select id=\"font_body_weight\" class=\"font-input text-input form-control\">\\\n                                                    <option value=\"100\">100</option>\n                                                    <option value=\"200\">200</option>\n                                                    <option value=\"300\">300</option>\n                                                    <option value=\"400\">400</option>\n                                                    <option value=\"500\">500</option>\n                                                    <option value=\"600\">600</option>\n                                                    <option value=\"700\">700</option>\n                                                    <option value=\"800\">800</option>\n                                                </select>\n                                                <p class=\"form-text mt-2\"></p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"r row\">\n                                    <div class=\"col-md-12\">\n                                        <div class=\"form-group row\">\n                                            <label class=\"col-sm-6 col-form-label\">CSS Rules</label>\n                                            <div class=\"col-sm-12\">\n                                                <textarea id=\"css_rules\" data-key=\"css_rules\" data-type=\"css_rules\"\n                                                    class=\"csseditor-input form-control w-400\" name=\"css_rules\"> </textarea>\n                                                <p class=\"form-text mt-2\">Add custom CSS rules to adjust visual look\n                                                    of the page.</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <button type=\"button\" data-toggle=\"modal\" data-target=\"#layouts\" class=\"btn add-layout btn-outline-primary mt-2 nodrag\">Add Layout</button>\n            </div>\n        </div>\n        <div class=\"col-md-7 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card preview border-white shadow-sm \">\n\n        </div>\n      </div>\n    </div>\n\n    <div class=\"modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\"></h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\"\n            aria-atomic=\"true\" data-bs-delay=\"3000\">\n            <div class=\"d-flex\">\n                <div class=\"toast-body\"></div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"\n                    aria-label=\"Close\"></button>\n            </div>\n        </div>\n    </div>\n    `;\n}","// js dependencies\nimport { headers, showLoader, hideLoader, initHeader, initFooter, initBreadcrumbs, parseApiError, getCookie, onClick, simulateClick, getSiteId, link, toast } from '@kenzap/k-cloud';\nimport { timeConverterAgo } from \"../_/_helpers.js\"\nimport { HTMLContent } from \"../_/_cnt_page_edit.js\"\n\n// where everything happens\nconst _this = {\n\n    state: {\n        xhr: null,\n        firstLoad: true,\n        domain: '',\n        page_template: \"universal\",\n        changes: false,\n        page_meta: {},\n        dataAPI: null,\n        data: null,\n        mode: 'production',\n        http_source: 'desktop',\n        timer: null,\n        dragulaInit: false\n    },\n    init: () => {\n        \n        _this.getData(); \n        _this.getAPIData();\n    },\n    getAPIData: () => {\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"get_site_data\");\n        params.append(\"id\", getSiteId());\n        params.append(\"fl\", _this.getPageSlug());\n        params.append(\"mode\", _this.state.mode);\n        params.append(\"source\", 'pages');\n        params.append(\"token\", getCookie('kenzap_token'));\n\n        // do API query\n        fetch('https://siteapi.kenzap.cloud/v1/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(), \n            }, \n            body: params\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            // hideLoader();\n\n            if(response.success){\n\n                _this.state.dataAPI = response;\n\n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        id:         getCookie('lang')\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            _this.state.data = response;\n\n            // hide UI loader\n            // hideLoader();\n            \n            if(response.success){\n\n                // init header\n                initHeader(response);\n                \n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    startRender: () => {\n\n        // only start when both apis have loaded\n        if(_this.state.data == null || _this.state.dataAPI == null) return;\n\n        // load dependencies\n        if(_this.state.firstLoad){\n\n            _this.laodScript('https://code.jquery.com/jquery-3.6.0.min.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls/dragula.min.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls-v2.js');\n            _this.laodScript('https://site.kenzap.cloud/js/controls/ace.min.js');  \n        }\n\n        // get core html content \n        _this.loadPageStructure();  \n\n        // render table\n        setTimeout(function(){ _this.renderPage(); },2000);\n\n        // bind content listeners\n        _this.initListeners();\n    \n        // initiate footer\n        _this.initFooter();\n\n        // first load\n        _this.state.firstLoad = false;\n\n    },\n    renderPage: () => {\n\n        hideLoader();\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('/'), text: __('Dashboard') },\n                { link: link('/pages/'), text: __('Pages') },\n                { text: __('Edit page') },\n            ]\n        );\n\n        // bind data\n        Controls.page = _this.state.dataAPI.data;\n\n        // get public domain\n        _this.state.domain = _this.state.dataAPI.domain;\n\n        // preview\n        _this.preview();\n        \n        // page settings\n        _this.loadPageSettings();\n\n        // TODO mobile app\n        // if(_this.http_source!=\"mobile\") initBreadcrumbs('sites/site/pages/',[{'text':Controls.page.title}]);\n          \n        // website preview link\n        d.querySelector('.preview-link').setAttribute('href', \"http://\"+_this.state.domain+\"/\"+_this.getPageSlug()+\"/?\"+(Math.round(new Date().getTime()/1000)));\n\n        // init sections\n        _this.initSections();\n    },\n    preview: () => {\n\n        // stop if no preview window present (mobile app version)\n        if(!document.querySelector('.preview')) return;\n\n        let url = \"https://preview.kenzap.cloud/S\"+getSiteId()+\"/_site\";\n        // if(mode == 'production' && domain != undefined) url = 'https://'+domain;\n\n        let slug = _this.getPageSlug();\n        let iframe = document.querySelector('.preview iframe');\n        let src = url+'/'+slug+'/?rand='+ (+ new Date());\n        if(!iframe){\n\n            document.querySelector('.preview').innerHTML = '<iframe src=\"'+src+'\" class=\"card br iload\" style=\"width:100%;border:none;height:100%;min-height:600px;border-radius:4px;\" ></iframe>'\n        }else{\n\n            document.querySelector('.preview iframe').setAttribute('src', src);\n            // $(\".preview iframe\").attr('src', src);\n        }\n        setTimeout(function(){ document.querySelector('.preview iframe').classList.remove('iload'); }, 1000); // $(\".preview iframe\").removeClass('iload'); \n    },\n    loadPageSettings: () => {\n\n        let d = document;\n\n        // bind page settings \n        d.querySelector(\"#ptitle\").value = Controls.page.title;\n        d.querySelector(\"#pdesc\").value = Controls.page.description;\n        d.querySelector(\"#page_template\").value = Controls.page.template+\" template\"; _this.state.page_template = Controls.page.template;\n\n        // live update breadcrumb\n        // $(\"#ptitle\").keyup(function(){ Controls.page.title = this.value; $(\".breadcrumb-item.active\").html(this.value); controlsUpdates(); });\n        // $(\"#pdesc\").keyup(function(){ console.log(this.value); Controls.page.description = this.value; controlsUpdates(); });\n    \n        // console.log(Controls.page.typography.heading.font.value);\n        if(Controls.page.typography == undefined) Controls.page.typography = JSON.parse(\"{\\\"title\\\":\\\"Fonts\\\",\\\"hint\\\":\\\"Font pairs, typography settings.\\\",\\\"heading\\\":{\\\"font\\\":{\\\"title\\\":\\\"Font\\\",\\\"input\\\":\\\"font\\\",\\\"value\\\":\\\"Poppins\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"type\\\":{\\\"title\\\":\\\"Type\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"serif\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"weight\\\":{\\\"title\\\":\\\"Weight\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"600\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"}},\\\"body\\\":{\\\"font\\\":{\\\"title\\\":\\\"Font\\\",\\\"input\\\":\\\"font\\\",\\\"value\\\":\\\"Poppins\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"type\\\":{\\\"title\\\":\\\"Type\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"sans-serif\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"},\\\"weight\\\":{\\\"title\\\":\\\"Weight\\\",\\\"input\\\":\\\"text\\\",\\\"value\\\":\\\"400\\\",\\\"default\\\":\\\"\\\",\\\"hint\\\":\\\"\\\"}}}\");\n        if(Controls.page.cssrules == undefined){ Controls.page.cssrules = {}; }\n\n        d.querySelector(\"#font_heading\").value = Controls.page.typography.heading.font.value;\n        d.querySelector(\"#font_heading_type\").value = Controls.page.typography.heading.type.value;\n        d.querySelector(\"#font_heading_weight\").value = Controls.page.typography.heading.weight.value;\n\n        d.querySelector(\"#font_body\").value = Controls.page.typography.body.font.value;\n        d.querySelector(\"#font_body_type\").value = Controls.page.typography.body.type.value;\n        d.querySelector(\"#font_body_weight\").value = Controls.page.typography.body.weight.value;\n\n        if(Controls.page.cssrules.value !== undefined){ d.querySelector(\"#css_rules\").value = Controls.page.cssrules.value; }\n\n        onChange('.font_heading', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.font.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_heading_type', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.type.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_heading_weight', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.weight.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n\n\n        onChange('.font_body', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.font.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_body_type', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.type.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        onChange('.font_body_weight', (e) => {\n\n            e.preventDefault();\n            Controls.page.typography.heading.weight.value = e.currentTarget.value; _this.controlsUpdates();\n        });\n\n        // load font list\n        fetch('https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBwIX97bVWr3-6AIUvGkcNnmFgirefZ6Sw', {\n            method: 'get',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n            }\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            let js = response;\n            let flist = ''; for (let f in js.items) { flist += '<option value=\"' + js.items[f].family + '\">' + js.items[f].family + '</option>'; }\n\n            document.querySelector(\"#font_heading\").innerHTML = flist;\n            document.querySelector(\"#font_body\").innerHTML = flist;\n            document.querySelector('#font_heading [value=\"' + _this.state.dataAPI.data.typography.heading.font.value + '\"]').selected = true;\n            document.querySelector('#font_body [value=\"' + _this.state.dataAPI.data.typography.body.font.value + '\"]').selected = true;\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    controlsUpdates: () => {\n\n        // console.log('controlsUpdates');\n        // console.log(Controls.obj);\n\n        if(Controls.obj){\n\n          let action = Controls.obj.action;\n\n          // console.log(action);\n          switch(action){\n\n            case 'section-moveup': _this.state.changes = true; _this.initSections(); break;\n            case 'section-movedown': _this.state.changes = true; _this.initSections(); break;\n            case 'section-copy': _this.state.changes = true; _this.initSections(); break;\n            case 'section-remove': _this.state.changes = true; _this.initSections(); break;\n            case 'edit': _this.state.changes = true; break;\n            case 'copy': _this.state.changes = true; break;\n            case 'remove': _this.state.changes = true; break;\n          }\n        }\n    \n        // if(_this.state.changes && window.location.href.indexOf(\"#\")==-1){ history.pushState({pageID: 'pages'}, 'Cloud', window.location.pathname + \"#changes\"); }\n        if(_this.state.timer) clearTimeout(_this.state.timer);\n\n        _this.state.timer = setTimeout(function(){\n    \n          if(Controls.page) _this.setSiteData({mode: \"preview\", section: \"\", data: Controls.page});\n          \n        }, 1000);\n    },\n    initSections: () => {   \n        \n        // clear any previous sections\n        // document.querySelector('.sections > .card.lay').remove();\n        document.querySelectorAll('.sections > .card.lay').forEach(e => e.remove());\n\n        // $(\".sections > .card.lay\").remove();\n\n        // initialize sections and load layout editing controls\n        Controls.init(\".sections\", Controls.page, _this.controlsUpdates, 'sections');\n    \n        // activate sections drag and drop events\n        _this.initDragula();\n    },\n    initDragula: () => {\n\n        if(_this.state.dragulaInit) return;\n    \n        console.log(\"initDragula\");\n        _this.state.dragulaInit = true;\n        let drag = dragula([document.querySelector('.sections')],{\n    \n            // direction: 'vertical',\n            moves: function (el, source, handle, sibling) {\n                if(_this.state.http_source==\"mobile\") { return false; }\n                return el.classList.contains('lay') && el.querySelector('[data-bs-toggle=\"collapse\"]').classList.contains('collapsed');\n            },\n            accepts: function (el, target, source, sibling) {\n                return true;\n            }\n        });\n    \n        drag.on('drop', function(el) {\n        \n            console.log(\"drop\");\n            // dataGG = JSON.parse(JSON.stringify(dataG));\n            let i = 0;\n            let temp = JSON.parse(JSON.stringify(Controls.page));\n\n            document.querySelectorAll('.sections .seco').forEach( (e) => { \n                \n                let ind = e.currentTarget.dataset.section;\n                Controls.page.sections[i] = temp.sections[ind];\n                \n                console.log(ind +\" \"+i);\n                i++;   \n            });\n\n            // $( \".sections .seco\" ).each(function() {\n        \n            //     let ind = this.dataset.section;\n            //     Controls.page.sections[i] = temp.sections[ind];\n                \n            //     console.log(ind +\" \"+i);\n            //     i++;    \n            // });\n        \n            // reassign section indexes\n            _this.setSiteData({mode: \"preview\", section: \"\", data: Controls.page});\n        \n            _this.initSections();\n        });\n    },\n    setSiteData: (obj) => {\n      \n        // console.log(obj);\n        // return;\n        if(obj.mode == 'production'){ showLoader(); }\n    \n        $(\".preview iframe\").addClass('iload');\n        if(_this.state.xhr) _this.state.xhr.abort();\n        _this.state.xhr = $.post(\"https://siteapi.kenzap.cloud/v1/\", { cmd: 'set_site_data', id: getSiteId(), fl: _this.getPageSlug(), page_meta: _this.state.page_meta, mode: _this.state.mode, section: obj.section, source: 'pages', data: obj.data, mode: obj.mode, token: getCookie('kenzap_token') }, function(data, status){\n    \n            // alert(JSON.stringify(data));\n            // $( \"#loader\" ).fadeOut( \"fast\" ); \n            \n            if(data.success){\n    \n                _this.state.changes = false;\n    \n                // notify\n                if(obj.mode == 'production'){ \n\n                    toast(__('Latest changes are now online.'));\n                }\n    \n                hideLoader();\n\n                // refresh preview\n                _this.preview();\n    \n            }else{\n    \n                parseError(data);\n            }\n    \n        },'json');\n    },\n    rowStruct: (i) => {\n\n        return `\n        <tr>\n          <td class=\"destt\" style=\"max-width:250px;min-width:250px;\">\n            <div>\n              <a class=\"text-dark\" href=\"/edit-page/?id=${ _this.state.dataAPI.list[i].key + '&sid='+getSiteId() }\" ><b>${ _this.state.dataAPI.list[i].title }</b><i style=\"color:#9b9b9b;font-size:15px;margin-left:8px;\" title=\"Edit page\" class=\"mdi mdi-pencil menu-icon edit-page\"></i></a>\n            </div>\n          </td>\n          <td>\n            <span>${ _this.getStatus(_this.state.dataAPI.list[i].status) }</span>\n          </td>\n          <td class=\"\">\n            <span>${ timeConverterAgo( _this.state.data.meta.time, _this.state.dataAPI.list[i].time ) }</span>\n          </td>\n          <td>\n            <div class=\"d-flex justify-content-end\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" data-kid='${ _this.state.dataAPI.list[i].key }' data-key=\"${ _this.state.dataAPI.list[i].key }\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash set-home me-3 ${ _this.state.dataAPI.list[i].key == _this.state.dataAPI.home? 'text-primary':'text-secondary' }\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z\"/>\n                </svg>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" data-kid='${ _this.state.dataAPI.list[i].key }' data-key=\"${ _this.state.dataAPI.list[i].key }\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash text-danger remove-page\" viewBox=\"0 0 16 16\">\n                    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                    <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                </svg>\n            </div>\n          </td>\n        </tr>`;\n    },\n    getPageSlug: () => {\n\n        let urlParams = new URLSearchParams(window.location.search);\n        let slug = urlParams.get('slug') ? urlParams.get('slug') : \"\";\n        return slug;\n\n        // return 'about-us';\n\n        // let url = new URL(window.location.href);\n        // let id = url.pathname.trim().split('/').slice(-3)[0];\n        // return id;\n    },\n    getType: (t) => {\n\n        let html = '';\n        switch(t){\n            case 'admin':\n                html = '<div title=\"Administrator\" class=\"badge bg-danger fw-light\">Administrator</div>';\n            break;\n            case 'editor':\n                html = '<div title=\"Editor\" class=\"badge bg-primary fw-light\">Editor</div>';\n            break;\n            case 'viewer':\n                html = '<div title=\"Viewer\" class=\"badge bg-success fw-light\">Viewer</div>';\n            break;\n        }\n        return html;\n    },\n    initHeader: (response) => {\n\n        onClick('.nav-back', (e) => {\n\n            e.preventDefault();\n            console.log('.nav-back');\n            let link = document.querySelector('.bc ol li:nth-last-child(2)').querySelector('a');\n            simulateClick(link);\n        });\n    },\n    initListeners: () => {\n\n        console.log('initListeners');\n\n        // actions listeners\n        // onClick('.acc2', _this.listeners.actions);\n\n        // set as home page\n        // onClick('.set-home', _this.listeners.setHome);\n\n        if(!_this.state.firstLoad) return;\n\n        // add user button\n        onClick('.btn-publish', _this.listeners.publish);\n\n        // add layout button\n        onClick('.add-layout', _this.listeners.addLayout);\n\n        // add modal confirm button\n        onClick('.btn-modal', _this.listeners.modalSuccessBtn);\n    },\n    listeners: {\n\n        // actions: (e) => {\n\n        //     let modal = document.querySelector(\".modal\");\n        //     let modalCont = new bootstrap.Modal(modal);\n        //     modal.querySelector(\".modal-dialog\").style.maxWidth = '500px';\n            \n        //     modal.querySelector(\".modal-title\").innerHTML = __('Action');\n        //     modal.querySelector(\".btn-primary\").style.display = 'none';\n        //     modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n        //     let html = '\\\n        //     <nav id=\"context-menu\" class=\"context-menu\">\\\n        //       <ul class=\"context-menu__items\">\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"moveup\">\\\n        //             Move Up <i class=\"mdi mdi-arrow-up\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"movedown\">\\\n        //             Move Down <i class=\"mdi mdi-arrow-down\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"copy\">\\\n        //             Duplicate <i class=\"mdi mdi-content-duplicate\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"settings\" >\\\n        //             Advanced <i class=\"mdi mdi-brush\"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //         <li class=\"context-menu__item\">\\\n        //           <a href=\"#\" class=\"context-menu__link acc\" data-acc=\"remove\">\\\n        //             Delete <i class=\"mdi mdi-trash-can-outline \"></i> \\\n        //           </a>\\\n        //         </li>\\\n        //       </ul>\\\n        //     </nav>';\n\n        //     modal.querySelector(\".modal-body\").innerHTML = html;\n            \n        //     modalCont.show();\n        // },\n        publish: (e) => {\n            \n            if(document.querySelector(\"#ptitle\").value.length<1){ alert(__('Please enter page title to save changes.')); return false; }\n    \n            e.preventDefault();\n\n            // mode = (this.dataset.mode!=undefined)?this.dataset.mode:\"production\";\n            if(Controls.page) _this.setSiteData({mode: \"production\", section: \"\", data: Controls.page});\n        },\n        addLayout: (e) => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            modal.querySelector(\".modal-dialog\").style.maxWidth = '700px';\n            let CDN2 = 'https://static.kenzap.com';\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Add layout');\n            modal.querySelector(\".btn-primary\").style.display = 'none';\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            showLoader();\n\n            // init params\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"preview_sections\");\n            params.append(\"template\", 'page_template');\n            params.append(\"token\", getCookie('kenzap_token'));\n    \n            // do API query\n            fetch('https://siteapi.kenzap.cloud/v1/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                // hide UI loader\n                hideLoader();\n\n                if(response.success){\n\n                    Controls.layouts = response;\n                    let html = '';\n                    html += '<div class=\"row\">';\n                    for (let key in response.res) {\n        \n                        html += '<div class=\"col-md-6\" style=\"margin:16px 0;\">';\n                        html += '<h4>'+response.res[key]['meta']['title'];\n                        html += '<div class=\"br-wrapper br-theme-css-stars\"><select id=\"profile-rating\" name=\"rating\" autocomplete=\"off\" style=\"display: none;\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option></select><div class=\"br-widget\"><a href=\"#\" data-rating-value=\"1\" data-rating-text=\"1\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"2\" data-rating-text=\"2\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"3\" data-rating-text=\"3\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"4\" data-rating-text=\"4\" class=\"br-selected\"></a><a href=\"#\" data-rating-value=\"5\" data-rating-text=\"5\" class=\"br-selected br-current\"></a></div></div>';\n                        html += '</h4>';\n                        html += '<img alt=\"'+response.res[key]['meta']['title']+'\" style=\"max-width:100%;\" src=\"'+CDN2+'/preview/'+response.res[key]['template']+'-'+response.res[key]['meta']['slug']+'-600.jpeg?'+response.res[key]['meta']['updated']+'\" />';\n                        html += '<a class=\"sclick csection\" data-index=\"'+key+'\" >Choose this section</a>';\n                        html += '</div>';\n                    }\n                    html += '</div>';\n\n                    modal.querySelector(\".modal-body\").innerHTML = html;\n\n                    onClick('.sclick', _this.listeners.sectionClick);\n\n                }else{\n\n                    simulateClick( simulateClick(document.querySelector('.modal .btn-close')) );\n                    toast(__('No available layouts found.'));\n                    // parseApiError(response);\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n\n            modalCont.show();\n        },\n        sectionClick: (e) => {\n\n            simulateClick(document.querySelector('.modal .btn-close'));\n            // $(\"#close-layouts\").trigger('click');\n\n            let layout = Controls.layouts.res[e.currentTarget.dataset.index]['extra'];\n            let layout_id = Controls.layouts.res[e.currentTarget.dataset.index]['id'];\n            if(Controls.page.sections == undefined) Controls.page.sections = [];\n            console.log(Controls.page);\n            Controls.page.sections.push(layout);\n            // console.log(dataG);\n            // console.log(layout);\n\n            // preload layout\n            $.post(\"https://siteapi.kenzap.cloud/v1/\", { cmd: 'preload_layout', id: getSiteId(), layout_id: layout_id, token: getCookie('kenzap_token') }, function(data, status){\n\n                if(data.success){\n\n                    _this.controlsUpdates();\n                    // refresh preview\n                    // preview();\n                    // console.log(\"preview\");\n                }else{\n\n                    parseError(data);\n                }\n            },'json');\n\n            // refresh sections \n            _this.initSections();   \n        },\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n        modalSuccessBtnFunc: null\n    },\n    getStatus: (st) => {\n\n        st = parseInt(st);\n        switch(st){\n          case 0: return '<div class=\"badge bg-warning\">Draft</div>';\n          case 1: return '<div class=\"badge bg-primary\">Published</div>';\n          case 3: return '<div class=\"badge bg-danger\">Unpublished</div>';\n          default: return '<div class=\"badge bg-warning text-dark\">Drafts</div>';\n        }\n    },\n    laodScript: (script) => {\n\n        // if(tab4Loaded) return;\n        let sjs = document.createElement(\"script\");\n        sjs.setAttribute(\"src\", script+\"?\"+(new Date().getTime()));\n        document.body.appendChild(sjs);\n        // tab4Loaded = true;\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n    initFooter: () => {\n\n        initFooter(__('Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/dashboard\" target=\"_blank\">', '</a>'), __('Copyright © %1$ %2$Dashboard%3$ Extension', new Date().getFullYear(), '<a class=\"text-muted\" href=\"https://github.com/kenzap/dashboard\" target=\"_blank\">', '</a>'));\n \n        // initFooter(__('Copyright © '+new Date().getFullYear()+' <a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">Kenzap</a>. All rights reserved.'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();\n"],"names":["timeConverterAgo","now","time","console","log","parseInt","past","a","Date","months","year","getFullYear","month","getMonth","date","getDate","getHours","getMinutes","getSeconds","HTMLContent","__","_this","state","xhr","firstLoad","domain","page_template","changes","page_meta","dataAPI","data","mode","http_source","timer","dragulaInit","init","getData","getAPIData","params","URLSearchParams","append","getSiteId","getPageSlug","getCookie","fetch","method","headers","localStorage","hasOwnProperty","body","then","response","json","success","startRender","parseApiError","error","showLoader","JSON","stringify","query","user","type","fields","token","locale","id","initHeader","laodScript","loadPageStructure","setTimeout","renderPage","initListeners","initFooter","hideLoader","d","document","initBreadcrumbs","link","text","Controls","page","preview","loadPageSettings","querySelector","setAttribute","Math","round","getTime","initSections","url","slug","iframe","src","innerHTML","classList","remove","value","title","description","template","typography","undefined","parse","cssrules","heading","font","weight","onChange","e","preventDefault","currentTarget","controlsUpdates","js","flist","f","items","family","selected","obj","action","clearTimeout","setSiteData","section","querySelectorAll","forEach","initDragula","drag","dragula","moves","el","source","handle","sibling","contains","accepts","target","on","i","temp","ind","dataset","sections","$","addClass","abort","post","cmd","fl","status","toast","parseError","rowStruct","list","key","getStatus","meta","home","urlParams","window","location","search","get","getType","t","html","onClick","simulateClick","listeners","publish","addLayout","modalSuccessBtn","length","alert","modal","modalCont","bootstrap","Modal","style","maxWidth","CDN2","display","layouts","res","sectionClick","show","layout","index","layout_id","push","modalSuccessBtnFunc","st","script","sjs","createElement","appendChild"],"mappings":"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"}