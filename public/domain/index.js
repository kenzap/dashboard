!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function e(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==a.return||a.return()}finally{if(c)throw r}}}}var n=function(){var t=new URLSearchParams(window.location.search);return t.get("sid")?t.get("sid"):""},a=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""},o=function(t){if(401===t.code)-1!=window.location.href.indexOf("localhost")?alert("Please update user token"):location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href;else alert(t.reason)},i=function(t,n){if(document.querySelector(t)){var a,o=e(document.querySelectorAll(t));try{for(o.s();!(a=o.n()).done;){var i=a.value;i.removeEventListener("click",n,!0),i.addEventListener("click",n,!0)}}catch(t){o.e(t)}finally{o.f()}}},r=function(){var t=document.querySelector(".loader");t&&(t.style.display="block")},s=function(){var t=document.querySelector(".loader");t&&(t.style.display="none")},c={state:{firstLoad:!0,ajaxQueue:0,tld:[".kenzap.site",".kenzap.tech",".warung.menu"],tldType:"custom",dataAPI:null,data:null},init:function(){c.getData(),c.getAPIData()},getAPIData:function(){var t=new URLSearchParams;t.append("cmd","get_site_domain"),t.append("id",n()),t.append("token",a("kenzap_token")),fetch("https://siteapi.kenzap.cloud/v1/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:t}).then((function(t){return t.json()})).then((function(t){s(),t.success?(c.state.dataAPI=t,c.startRender()):o(t)})).catch((function(t){console.error("Error:",t)}))},getData:function(){c.state.firstLoad&&r(),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:{Accept:"application/json","Content-Type":"text/plain",Authorization:"Bearer "+a("kenzap_api_key"),"Kenzap-Header":localStorage.hasOwnProperty("header"),"Kenzap-Token":a("kenzap_token"),"Kenzap-Sid":n()},body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:a("kenzap_token")},locale:{type:"locale",id:a("lang")}}})}).then((function(t){return t.json()})).then((function(t){c.state.data=t,s(),t.success?(!function(t){if(t.header&&localStorage.setItem("header",t.header),!document.querySelector("#k-script")){var e=document.createElement("div");e.innerHTML=localStorage.getItem("header"),e=e.firstChild,document.body.prepend(e),Function(document.querySelector("#k-script").innerHTML).call("test")}t.locale&&window.i18n.init(t.locale)}(t),c.startRender()):o(t)})).catch((function(t){console.error("Error:",t)}))},startRender:function(){null!=c.state.data&&null!=c.state.dataAPI&&(c.loadPageStructure(),c.renderPage(c.state.data),c.initListeners(),c.initFooter(),c.state.firstLoad=!1)},renderPage:function(t){var n,a,o,i,r=document;if(function(t){var n,a='<ol class="breadcrumb mt-2 mb-0">',o=e(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;void 0===i.link?a+='<li class="breadcrumb-item">'.concat(i.text,"</li>"):a+='<li class="breadcrumb-item"><a href="'.concat(i.link,'">').concat(i.text,"</a></li>")}}catch(t){o.e(t)}finally{o.f()}a+="</ol>",document.querySelector(".bc").innerHTML=a}([{link:(n="/",a=new URLSearchParams(window.location.search),o=a.get("sid")?a.get("sid"):"",i=-1==n.indexOf("?")?"?sid="+o:"&sid="+o,n+i),text:__("Dashboard")},{text:__("Domain settings")}]),c.state.dataAPI.domain){for(var s in c.state.tld)c.state.dataAPI.domain.indexOf(c.state.tld[s])>0&&(c.state.tldType=c.state.tld[s]);if("custom"==c.state.tldType)r.querySelector(".val-tld").value=c.state.dataAPI.domain;else{var d=c.state.dataAPI.domain.replace(c.state.tldType,"");r.querySelector(".val-tld").value=d,r.querySelector(".val-tld").innerHTML=c.state.tldType}}},rowStruct:function(t,e){var n=new Image;return n.onload=function(){document.querySelector("#img"+this.kid).setAttribute("src",this.src)},n.kid=e.kid,n.src="https://kenzap.b-cdn.net/150/a"+e.kid+"_1.jpeg",'\n        <tr data-sec="0" >\n            <td>\n                <b>'.concat(e.kid,'</b>\n            </td>\n            <td class="name">\n                <div class="object-img">\n                    <img id=\'img').concat(e.kid,'\' src="https://account.kenzap.com/images/default_avatar.jpg" alt="user avatar">\n                </div>\n                <b>').concat(e.name,"</b>\n            </td>\n            <td>\n                <b>").concat(c.getType(e.role),'</b>\n            </td>\n            <td>\n                <div class="d2 d-flex justify-content-end">\n                    <a href="javascript:void(0);" onclick="javascript:;" >\n                        <svg xmlns="http://www.w3.org/2000/svg" data-kid=\'').concat(e.kid,'\' width="16" height="16" fill="currentColor" class="bi bi-trash text-danger edit-user d-none" viewBox="0 0 16 16">\n                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n                        </svg>\n                    </a>\n                    <a href="javascript:void(0);" onclick="javascript:;" >\n                        <svg xmlns="http://www.w3.org/2000/svg" style="').concat(parseInt(e.kid)==parseInt(t)?"display:none;":"","\"  data-kid='").concat(e.kid,'\' width="16" height="16" fill="currentColor" class="bi bi-trash text-danger remove-user" viewBox="0 0 16 16">\n                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n                        </svg>\n                    </a>\n                </div>\n            </td>\n        </tr>')},getType:function(t){var e="";switch(t){case"admin":e='<div title="Administrator" class="badge bg-danger fw-light">Administrator</div>';break;case"editor":e='<div title="Editor" class="badge bg-primary fw-light">Editor</div>';break;case"viewer":e='<div title="Viewer" class="badge bg-success fw-light">Viewer</div>'}return e},initHeader:function(t){i(".nav-back",(function(t){t.preventDefault(),console.log(".nav-back");var e,n,a=document.querySelector(".bc ol li:nth-last-child(2)").querySelector("a");e=a,n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}),e.dispatchEvent(n)}))},initListeners:function(){console.log("initListeners "),c.state.firstLoad&&(i(".domain-list li a",c.listeners.domainChange),i(".btn-apply",c.listeners.applyChanges))},listeners:{applyChanges:function(t){if(t.preventDefault(),r(),"true"!==modal.querySelector(".btn-primary").dataset.loading){document.querySelector(".btn-apply").dataset.loading=!0;var e=document.querySelector(".val-tld").value;if(confirm(__("This will change your website URL permanently."))){var i=new bootstrap.Toast(document.querySelector(".toast"));"custom"!=c.state.tldType&&(e+=c.state.tldType);var s=new URLSearchParams;s.append("cmd","set_site_domain"),s.append("id",n()),s.append("domain",e),s.append("token",a("kenzap_token")),fetch("https://siteapi.kenzap.cloud/v1/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:s}).then((function(t){return t.json()})).then((function(t){document.querySelector(".btn-apply").dataset.loading=!1,t.success?(document.querySelector(".toast .toast-body").innerHTML=__("Changes applied"),i.show()):o(t),console.log("Success:",t)})).catch((function(t){console.error("Error:",t)}))}}},domainChange:function(t){t.preventDefault(),document.querySelector(".btn-tld").innerHTML=t.currentTarget.innerHTML,c.state.tldType=t.currentTarget.dataset.key},modalSuccessBtn:function(t){c.listeners.modalSuccessBtnFunc(t)},modalSuccessBtnFunc:null},loadPageStructure:function(){c.state.firstLoad&&(document.querySelector("#contents").innerHTML=function(t){return'\n    <div class="container">\n      <div class="d-flex justify-content-between bd-highlight mb-3">\n          <nav class="bc" aria-label="breadcrumb"></nav>\n          <button class="btn btn-primary btn-add d-none" type="button">'.concat(t("Add user"),'</button>\n      </div> \n      \n      <div class="row">\n        <div class="col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card">\n          <div class="card border-white shadow-sm br">\n            <div class="card-body">\n              <h4 class="mb-4">').concat(t("Domain Settings"),'</h4>\n              <p class="card-description">').concat(t("Connect your cloud space with a range of free premium domains."),'</p>\n              <div class="domain" style="max-width: 500px;"> \n\n                <div class="form-group">\n                  <div class="input-group">\n\n                    <div class="input-group">\n                      <input type="text" style="text-align:right;" class="form-control val-tld" aria-label="">\n                      <button class="btn btn-sm btn-outline-primary dropdown-toggle btn-tld" data-bs-toggle="dropdown" aria-expanded="false">.kenzap.site</button>\n                      <ul class="dropdown-menu dropdown-menu-end domain-list">\n                        <li><a class="dropdown-item" href="#" data-key=\'.kenzap.site\'>.kenzap.site</a></li>\n                        <li><a class="dropdown-item d-none" href="#" data-key=\'.warung.menu\'>.warung.menu</a></li>\n                        <li><a class="dropdown-item d-none" href="#" data-key=\'.kenzap.tech\'>.kenzap.tech</a></li>\n                        <li><hr class="dropdown-divider"></li>\n                        <li><a class="dropdown-item" href="#" data-key=\'custom\'>My domain</a></li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n\n                <h5 class="card-title mt-4">').concat(t("* kenzap.site domain"),'</h5>\n                <p class="form-text" >').concat(t("1. Choose free premium domain from the list above"),'</p>\n                <p class="form-text" >').concat(t("2. Hit publish button below"),'</p>\n                <hr> \n                <h5 class="card-title mt-4">').concat(t("* my domain"),'</h5>\n                <p class="form-text" >').concat(t("1. Purchase domain with your registrar"),'</p>\n                <p class="form-text" >').concat(t("2. Point this domain to Kenzap Cloud"),'</p>\n                <p class="form-text" >').concat(t("3. Type your domain in the field above"),'</p>\n                <p class="form-text" >').concat(t("4. Hit publish button below"),'</p>\n      \n              </div>\n              <div class="d-flex justify-content-between bd-highlight mb-1 mt-4 align-items-center">\n                <button type="button" class="btn btn-outline-primary btn-fw btn-icon-text nav-deactivate btn-apply" id="publish">').concat(t("Apply changes"),'</button>\n                <p class="float-right form-text ms-3 mt-3">Contact support <a href="mailto:support@kenzap.com">support@kenzap.com</a></p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>    \n    </div>\n\n    <div class="modal" tabindex="-1">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title"></h5>\n                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                </div>\n                <div class="modal-body">\n\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary btn-modal"></button>\n                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="position-fixed bottom-0 p-2 m-4 end-0 align-items-center">\n        <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive"\n            aria-atomic="true" data-bs-delay="3000">\n            <div class="d-flex">\n                <div class="toast-body"></div>\n                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"\n                    aria-label="Close"></button>\n            </div>\n        </div>\n    </div>\n    ')}(__))},initFooter:function(){var t,e;t=__("Copyright © "+(new Date).getFullYear()+' <a class="text-muted" href="https://kenzap.com/" target="_blank">Kenzap</a>. All rights reserved.'),e=__("Kenzap Cloud Services - Dashboard"),document.querySelector("footer .row").innerHTML='\n    <div class="d-sm-flex justify-content-center justify-content-sm-between">\n        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">'.concat(t,'</span>\n        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted">').concat(e,"</span>\n    </div>")}};c.init()}();
