{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_cnt_access.js","../../src/access/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name spaceID\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\n export const spaceID = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.cloud subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.cloud\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name checkHeader\n * @description This function tracks UI updates, creates header version checksum and compares it after every page reload\n * @param {object} object - API response.\n */\n export const checkHeader = () => {\n\n    let version = (localStorage.hasOwnProperty('header') && localStorage.hasOwnProperty('header-version')) ? localStorage.getItem('header-version') : 0;\n    let check = window.location.hostname + '/' + spaceID() + '/' + getCookie('locale');\n    if(check != getCookie('check')){ version = 0; console.log('refresh'); }\n    \n    setCookie('check', check, 5);\n\n    return version\n}\n\n/**\n * @name headers\n * @description Default headers object for all Kenzap Cloud fetch queries. \n * @param {object} headers\n */\n export const headers = {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n    'Kenzap-Locale': getCookie('locale') ? getCookie('locale') : \"en\",\n    'Kenzap-Header': checkHeader(),\n    'Kenzap-Token': getCookie('kenzap_token'),\n    'Kenzap-Sid': spaceID(),\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\n export const parseApiError = (data) => {\n\n    // outout to frontend console\n    console.log(data);\n\n    // unstructured failure\n    if(isNaN(data.code)){\n    \n        // structure failure data\n        let log = data;\n        try{ log = JSON.stringify(log); }catch(e){ }\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"report\");\n        params.append(\"sid\", spaceID());\n        params.append(\"token\", getCookie('kenzap_token'));\n        params.append(\"data\", log);\n        \n        // report error\n        fetch('https://api-v1.kenzap.cloud/error/', { method: 'post', headers: { 'Accept': 'application/json', 'Content-type': 'application/x-www-form-urlencoded', }, body: params });\n\n        alert('Can not connect to Kenzap Cloud');  \n        return;\n    }\n    \n    // handle cloud error codes\n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')!=-1){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * Create a web friendly URL slug from a string.\n *\n * Requires XRegExp (http://xregexp.com) with unicode add-ons for UTF-8 support.\n *\n * Although supported, transliteration is discouraged because\n *     1) most web browsers support UTF-8 characters in URLs\n *     2) transliteration causes a loss of information\n *\n * @author Sean Murphy <sean@iamseanmurphy.com>\n * @copyright Copyright 2012 Sean Murphy. All rights reserved.\n * @license http://creativecommons.org/publicdomain/zero/1.0/\n *\n * @param string s\n * @param object opt\n * @return string\n */\n export const slugify = (s, opt) => {\n\n\ts = String(s);\n\topt = Object(opt);\n\t\n\tvar defaults = {\n\t\t'delimiter': '-',\n\t\t'limit': undefined,\n\t\t'lowercase': true,\n\t\t'replacements': {},\n\t\t'transliterate': (typeof(XRegExp) === 'undefined') ? true : false\n\t};\n\t\n\t// Merge options\n\tfor (var k in defaults) {\n\t\tif (!opt.hasOwnProperty(k)) {\n\t\t\topt[k] = defaults[k];\n\t\t}\n\t}\n\t\n\tvar char_map = {\n\t\t// Latin\n\t\t'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE', 'Ç': 'C', \n\t\t'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I', 'Î': 'I', 'Ï': 'I', \n\t\t'Ð': 'D', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O', 'Ö': 'O', 'Å': 'O', \n\t\t'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Å°': 'U', 'Ý': 'Y', 'Þ': 'TH', \n\t\t'ß': 'ss', \n\t\t'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a', 'æ': 'ae', 'ç': 'c', \n\t\t'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i', 'í': 'i', 'î': 'i', 'ï': 'i', \n\t\t'ð': 'd', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o', 'õ': 'o', 'ö': 'o', 'Å': 'o', \n\t\t'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u', 'Å±': 'u', 'ý': 'y', 'þ': 'th', \n\t\t'ÿ': 'y',\n\n\t\t// Latin symbols\n\t\t'©': '(c)',\n\n\t\t// Greek\n\t\t'Α': 'A', 'Β': 'B', 'Γ': 'G', 'Δ': 'D', 'Ε': 'E', 'Ζ': 'Z', 'Η': 'H', 'Θ': '8',\n\t\t'Ι': 'I', 'Κ': 'K', 'Λ': 'L', 'Μ': 'M', 'Ν': 'N', 'Ξ': '3', 'Ο': 'O', 'Π': 'P',\n\t\t'Ρ': 'R', 'Σ': 'S', 'Τ': 'T', 'Υ': 'Y', 'Φ': 'F', 'Χ': 'X', 'Ψ': 'PS', 'Ω': 'W',\n\t\t'Î': 'A', 'Î': 'E', 'Î': 'I', 'Î': 'O', 'Î': 'Y', 'Î': 'H', 'Î': 'W', 'Îª': 'I',\n\t\t'Î«': 'Y',\n\t\t'α': 'a', 'β': 'b', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'h', 'θ': '8',\n\t\t'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': '3', 'ο': 'o', 'π': 'p',\n\t\t'ρ': 'r', 'σ': 's', 'τ': 't', 'υ': 'y', 'φ': 'f', 'χ': 'x', 'ψ': 'ps', 'ω': 'w',\n\t\t'Î¬': 'a', 'Î­': 'e', 'Î¯': 'i', 'Ï': 'o', 'Ï': 'y', 'Î®': 'h', 'Ï': 'w', 'ς': 's',\n\t\t'Ï': 'i', 'Î°': 'y', 'Ï': 'y', 'Î': 'i',\n\n\t\t// Turkish\n\t\t'Å': 'S', 'Ä°': 'I', 'Ç': 'C', 'Ü': 'U', 'Ö': 'O', 'Ä': 'G',\n\t\t'Å': 's', 'Ä±': 'i', 'ç': 'c', 'ü': 'u', 'ö': 'o', 'Ä': 'g', \n\n\t\t// Russian\n\t\t'Ð': 'A', 'Ð': 'B', 'Ð': 'V', 'Ð': 'G', 'Ð': 'D', 'Ð': 'E', 'Ð': 'Yo', 'Ð': 'Zh',\n\t\t'Ð': 'Z', 'Ð': 'I', 'Ð': 'J', 'Ð': 'K', 'Ð': 'L', 'Ð': 'M', 'Ð': 'N', 'Ð': 'O',\n\t\t'Ð': 'P', 'Ð ': 'R', 'Ð¡': 'S', 'Ð¢': 'T', 'Ð£': 'U', 'Ð¤': 'F', 'Ð¥': 'H', 'Ð¦': 'C',\n\t\t'Ð§': 'Ch', 'Ð¨': 'Sh', 'Ð©': 'Sh', 'Ðª': '', 'Ð«': 'Y', 'Ð¬': '', 'Ð­': 'E', 'Ð®': 'Yu',\n\t\t'Ð¯': 'Ya',\n\t\t'Ð°': 'a', 'Ð±': 'b', 'Ð²': 'v', 'Ð³': 'g', 'Ð´': 'd', 'Ðµ': 'e', 'Ñ': 'yo', 'Ð¶': 'zh',\n\t\t'Ð·': 'z', 'Ð¸': 'i', 'Ð¹': 'j', 'Ðº': 'k', 'Ð»': 'l', 'Ð¼': 'm', 'Ð½': 'n', 'Ð¾': 'o',\n\t\t'Ð¿': 'p', 'Ñ': 'r', 'Ñ': 's', 'Ñ': 't', 'Ñ': 'u', 'Ñ': 'f', 'Ñ': 'h', 'Ñ': 'c',\n\t\t'Ñ': 'ch', 'Ñ': 'sh', 'Ñ': 'sh', 'Ñ': '', 'Ñ': 'y', 'Ñ': '', 'Ñ': 'e', 'Ñ': 'yu',\n\t\t'Ñ': 'ya',\n\n\t\t// Ukrainian\n\t\t'Ð': 'Ye', 'Ð': 'I', 'Ð': 'Yi', 'Ò': 'G',\n\t\t'Ñ': 'ye', 'Ñ': 'i', 'Ñ': 'yi', 'Ò': 'g',\n\n\t\t// Czech\n\t\t'Ä': 'C', 'Ä': 'D', 'Ä': 'E', 'Å': 'N', 'Å': 'R', 'Š': 'S', 'Å¤': 'T', 'Å®': 'U', \n\t\t'Å½': 'Z', \n\t\t'Ä': 'c', 'Ä': 'd', 'Ä': 'e', 'Å': 'n', 'Å': 'r', 'š': 's', 'Å¥': 't', 'Å¯': 'u',\n\t\t'Å¾': 'z', \n\n\t\t// Polish\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'e', 'Å': 'L', 'Å': 'N', 'Ó': 'o', 'Å': 'S', 'Å¹': 'Z', \n\t\t'Å»': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Å': 'l', 'Å': 'n', 'ó': 'o', 'Å': 's', 'Åº': 'z',\n\t\t'Å¼': 'z',\n\n\t\t// Latvian\n\t\t'Ä': 'A', 'Ä': 'C', 'Ä': 'E', 'Ä¢': 'G', 'Äª': 'i', 'Ä¶': 'k', 'Ä»': 'L', 'Å': 'N', \n\t\t'Š': 'S', 'Åª': 'u', 'Å½': 'Z', \n\t\t'Ä': 'a', 'Ä': 'c', 'Ä': 'e', 'Ä£': 'g', 'Ä«': 'i', 'Ä·': 'k', 'Ä¼': 'l', 'Å': 'n',\n\t\t'š': 's', 'Å«': 'u', 'Å¾': 'z'\n\t};\n\t\n\t// Make custom replacements\n\tfor (var k in opt.replacements) {\n\t\ts = s.replace(RegExp(k, 'g'), opt.replacements[k]);\n\t}\n\t\n\t// Transliterate characters to ASCII\n\tif (opt.transliterate) {\n\t\tfor (var k in char_map) {\n\t\t\ts = s.replace(RegExp(k, 'g'), char_map[k]);\n\t\t}\n\t}\n\t\n\t// Replace non-alphanumeric characters with our delimiter\n\tvar alnum = (typeof(XRegExp) === 'undefined') ? RegExp('[^a-z0-9]+', 'ig') : XRegExp('[^\\\\p{L}\\\\p{N}]+', 'ig');\n\ts = s.replace(alnum, opt.delimiter);\n\t\n\t// Remove duplicate delimiters\n\ts = s.replace(RegExp('[' + opt.delimiter + ']{2,}', 'g'), opt.delimiter);\n\t\n\t// Truncate slug to max. characters\n\ts = s.substring(0, opt.limit);\n\t\n\t// Remove delimiter from ends\n\ts = s.replace(RegExp('(^' + opt.delimiter + '|' + opt.delimiter + '$)', 'g'), '');\n\t\n\treturn opt.lowercase ? s.toLowerCase() : s;\n}\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","export const HTMLContent = (__) => {\n\n    return `\n    <div class=\"container\">\n        <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n            <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            <div class=\"ms-2 dropdown\">\n              <button class=\"btn btn btn-outline-primary dropdown-toggle  h-space\" type=\"button\" id=\"accessOptions\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" >${ __('Options') }</button>\n              <ul class=\"dropdown-menu accessOptionsList\" aria-labelledby=\"accessOptions\">\n                <li><a class=\"dropdown-item btn-add-user\" href=\"#\">${ __('Add user') }</a></li>\n                <li><a class=\"dropdown-item btn-add-key\" href=\"#\">${ __('Add API Key') }</a></li>\n                <li><a class=\"dropdown-item btn-add-space\" href=\"#\">${ __('New space') }</a></li>\n   \n                <li><hr class=\"dropdown-divider\"></li>\n                <li><a class=\"dropdown-item btn-rename-space\" href=\"#\">${ __('Space name') }</a></li>\n                <li><a class=\"dropdown-item text-danger btn-remove-space\" href=\"#\">${ __('Remove space') }</a></li></ul>\n            </div>\n            <button class=\"btn btn-primary btn-add d-none\" type=\"button\">${ __('Add user') }</button>\n        </div> \n        \n        <div class=\"row\">\n            <div class=\"col-lg-7 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n              <div class=\"card border-white shadow-sm br\">\n                <div class=\"card-body\">\n                  <h4 class=\"card-title mb-4\">${ __('Users') }</h4>\n                  <div class=\"table-responsive table-nav\">\n                    <table class=\"table table-hover table-borderless align-middle table-striped table-p-list\" style=\"min-width:600px;\">\n                      <thead>\n                        <tr>\n                          <th>${ __('ID') }</th>\n                          <th>${ __('Name') }</th>\n                          <th>${ __('Rights') }</th>\n                          <th></th>\n                        </tr>\n                      </thead>\n                      <tbody class=\"list\">\n\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-lg-5 mt-4 mt-lg-0 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card\">\n              <div class=\"card border-white shadow-sm br\">\n                <div class=\"card-body\">\n                  <h4 class=\"card-title mb-4\">${ __('API Keys') }</h4>\n                  <div class=\"table-responsive table-nav\">\n                    <table class=\"table table-hover table-borderless align-middle table-striped table-p-list\">\n                      <thead>\n                        <tr>\n                          <th>${ __('Key') }</th>\n                          <th></th>\n                        </tr>\n                      </thead>\n                      <tbody class=\"list-keys\">\n\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"modal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\"></h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                    <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n        <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\"\n            aria-atomic=\"true\" data-bs-delay=\"3000\">\n            <div class=\"d-flex\">\n                <div class=\"toast-body\"></div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"\n                    aria-label=\"Close\"></button>\n            </div>\n        </div>\n    </div>\n    `;\n}","// js dependencies\nimport { headers, showLoader, hideLoader, initHeader, initFooter, initBreadcrumbs, parseApiError, getCookie, onClick, getSiteId, link, toast } from '@kenzap/k-cloud';\nimport { HTMLContent } from \"../_/_cnt_access.js\"\n\n// where everything happens\nconst _this = {\n\n    state: {\n        firstLoad: true,\n        ajaxQueue: 0,\n        dataAPI: null,\n        data: null,\n    },\n    init: () => {\n        \n        _this.getData(); \n        _this.getAPIData();\n    },\n    getAPIData: () => {\n\n        let params = new URLSearchParams();\n        params.append(\"cmd\", \"get_site_users\");\n        params.append(\"id\", getSiteId());\n        params.append(\"token\", getCookie('kenzap_token'));\n\n        // do API query\n        fetch('https://siteapi.kenzap.cloud/v1/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-type': 'application/x-www-form-urlencoded',\n            },\n            body: params\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            // hide UI loader\n            hideLoader();\n\n            if(response.success){\n\n                _this.state.dataAPI = response;\n\n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: headers,\n            body: JSON.stringify({\n                query: {\n                    user: {\n                        type:       'authenticate',\n                        fields:     ['avatar'],\n                        token:      getCookie('kenzap_token')\n                    },\n                    locale: {\n                        type:       'locale',\n                        source:      ['extension'],\n                        key:         'dashboard',\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            _this.state.data = response;\n\n            // hide UI loader\n            hideLoader();\n            \n            if(response.success){\n\n                // init header\n                initHeader(response);\n\n                _this.startRender();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => { parseApiError(error); });\n    },\n    startRender: () => {\n\n        // only start when both apis have loaded\n        if(_this.state.data == null || _this.state.dataAPI == null) return;\n\n\n        // get core html content \n        _this.loadPageStructure();  \n\n        // render table\n        _this.renderPage(_this.state.data);\n\n        // bind content listeners\n        _this.initListeners();\n    \n        // initiate footer\n        _this.initFooter();\n\n        // first load\n        _this.state.firstLoad = false;\n\n    },\n    renderPage: (product) => {\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('/'), text: __('Dashboard') },\n                { text: __('Users & API key') },\n            ]\n        );\n\n        // populate API key table\n        let listKeys = '';\n        for (let key of _this.state.dataAPI.keys) {\n\n            listKeys += _this.rowKeysStruct(key);\n        }\n\n        // empty user table\n        if (listKeys == '') {\n  \n            d.querySelector(\".list-keys\").innerHTML = `<tr><td colspan=\"2\">${ __('No API keys to display.') }</td></tr>`;\n          \n        }else{\n\n            d.querySelector(\".list-keys\").innerHTML = listKeys;\n        }\n\n        // populate user table\n        let listUsers = '';\n        for (let i in _this.state.dataAPI.users) {\n\n            listUsers += _this.rowUserStruct(_this.state.dataAPI.kid, _this.state.dataAPI.users[i]);\n        }\n\n        // empty user table\n        if (_this.state.dataAPI.users.length == 0) {\n  \n            d.querySelector(\".list\").innerHTML = `<tr><td colspan=\"5\">${ __('No users to display.') }</td></tr>`;\n          \n        }else{\n\n            d.querySelector(\".list\").innerHTML = listUsers;\n        }\n    },\n    rowUserStruct: (kid, user) => {\n    \n        let i = new Image();\n        i.onload = function(){ document.querySelector('#img'+this.kid).setAttribute('src', this.src); };\n        i.kid = user.kid;\n        i.src = 'https://kenzap.b-cdn.net/150/a'+user.kid+'_1.jpeg';\n\n        return `\n        <tr data-sec=\"0\" >\n            <td>\n                <b>${ user.kid }</b>\n            </td>\n            <td class=\"name\">\n                <div class=\"object-img\">\n                    <img id='img${ user.kid }' src=\"https://account.kenzap.com/images/default_avatar.jpg\" alt=\"user avatar\">\n                </div>\n                <b>${ user.name }</b>\n            </td>\n            <td>\n                <b>${ _this.getType(user.role) }</b>\n            </td>\n            <td>\n                <div class=\"d2 d-flex justify-content-end\">\n                    <a href=\"javascript:void(0);\" onclick=\"javascript:;\" >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" data-kid='${ user.kid }' width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash text-danger edit-user d-none\" viewBox=\"0 0 16 16\">\n                            <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                            <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                        </svg>\n                    </a>\n                    <a href=\"javascript:void(0);\" onclick=\"javascript:;\" >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"${ parseInt(user.kid) == parseInt(kid) ? 'display:none;':'' }\"  data-kid='${ user.kid }' width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash text-danger remove-user\" viewBox=\"0 0 16 16\">\n                            <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                            <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                        </svg>\n                    </a>\n                </div>\n            </td>\n        </tr>`;\n    },\n    rowKeysStruct: (key) => {\n\n        return `\n        <tr data-sec=\"0\" >\n            <td>\n                <div style=\"font-size:12px;\">${ key.token }</div>\n                <div>\n                    <div title=\"API key\" class=\"badge bg-light text-dark fw-light\">${ key.type == 1 ? __('Frontend'):__('Backend') }</div>\n                    <div title=\"API key\" class=\"badge bg-light text-dark fw-light\">${ key.perm == 1 ? __('Read only'):__('Read & write') }</div>\n                    <div title=\"API key\" class=\"badge bg-light text-dark fw-light\">${ key.iso == 1 ? __('Isolated'):__('Non isolated') }</div>\n        \n                </div>\n            </td>\n            <td>\n                <div class=\"d2 d-flex justify-content-end\">\n                    <a href=\"javascript:void(0);\" onclick=\"javascript:;\" >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" data-id='${ key.id }' width=\"16\" height=\"16\" fill=\"currentColor\" data-id=\"${ key.id }\" class=\"bi bi-trash text-danger rem-key\" viewBox=\"0 0 16 16\">\n                            <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\n                            <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\n                        </svg>\n                    </a>\n                </div>\n            </td>\n        </tr>`;\n    },\n    getType: (t) => {\n\n        let html = '';\n        switch(t){\n            case 'admin':\n                html = '<div title=\"Administrator\" class=\"badge bg-danger fw-light\">Administrator</div>';\n            break;\n            case 'editor':\n                html = '<div title=\"Editor\" class=\"badge bg-primary fw-light\">Editor</div>';\n            break;\n            case 'viewer':\n                html = '<div title=\"Viewer\" class=\"badge bg-success fw-light\">Viewer</div>';\n            break;\n            case 'isolated':\n                html = '<div title=\"Isolated\" class=\"badge bg-success fw-light\">Isolated</div>';\n            break;\n        }\n        return html;\n    },\n    initListeners: () => {\n\n        // remove user from space\n        onClick('.remove-user', _this.listeners.removeUser);\n\n        // remove space API key\n        onClick('.rem-key', _this.listeners.removeKey);\n\n        if(!_this.state.firstLoad) return;\n\n        // add user button\n        onClick('.btn-add-user', _this.listeners.addUser);\n\n        // add API key button\n        onClick('.btn-add-key', _this.listeners.addKey);\n        \n        // add API key button\n        onClick('.btn-remove-space', _this.listeners.removeSpace);\n\n        // rename space\n        onClick('.btn-rename-space', _this.listeners.renameSpace);\n        \n        // add new space\n        onClick('.btn-add-space', _this.listeners.addSpace);\n\n        // add modal confirm button\n        onClick('.btn-modal', _this.listeners.modalSuccessBtn);\n    },\n    listeners: {\n\n        addUser: () => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Add User');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Add');\n            modal.querySelector(\".btn-primary\").classList.remove('btn-danger');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n                    <label for=\"uid\" class=\"form-label\">${ __('User ID') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"uid\" autocomplete=\"off\" placeholder=\"100000590923\">\n                    <p class=\"form-text\">${ __('User ID can be found under') } <b>${ __('My Account &gt; My Profile</b> section.') }</p>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"ptitle\" class=\"form-label\">User Role</label>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"optionsRadios\" id=\"radio_1\" value=\"admin\" checked=\"checked\">\n                        ${ __('Administrator') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read, write permissions to data stored in this space. Allows API keys and user management.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"optionsRadios\" id=\"radio_2\" value=\"editor\">\n                        ${ __('Editor') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read, write permissions to data stored in this space.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"optionsRadios\" id=\"radio_3\" value=\"viewer\">\n                        ${ __('Viewer') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read permissions to data stored in this space.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"optionsRadios\" id=\"radio_4\" value=\"isolated\">\n                        ${ __('Isolated') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read, write permissions to data stored by this user. Provides no access to other data stored in this space.') }</p>\n                    </div>\n                </div>\n            </div>\n            `;\n\n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                if(modal.querySelector(\".btn-primary\").dataset.loading === 'true') return;\n\n                modal.querySelector(\".btn-primary\").dataset.loading = true;\n                modal.querySelector(\".btn-primary\").innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __('Loading..');\n\n                let uid = modal.querySelector(\"#uid\").value;\n                let role = modal.querySelector(\".modal.show input[type='radio']:checked\").value;\n                if(uid.length<2){ alert(__('Please provide longer user ID.')); return false; }\n\n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"add_site_user\");\n                params.append(\"id\", getSiteId());\n                params.append(\"uid\", uid);\n                params.append(\"role\", role);\n                params.append(\"token\", getCookie('kenzap_token'));\n\n                // send data\n                fetch('https://siteapi.kenzap.cloud/v1/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    },\n                    body: params \n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n\n                    if (response.success){\n\n                        _this.getAPIData();\n\n                        modalCont.hide();\n\n                    }else{\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            }\n\n            modalCont.show();\n\n            setTimeout( () => modal.querySelector(\"#uid\").focus(), 100 );\n        },\n        removeUser: (e) => {\n\n            e.preventDefault();\n\n            let kid = e.currentTarget.dataset.kid;\n\n            let c = confirm( __('Remove this user?') );\n\n            if(!c) return;\n\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"remove_site_user\");\n            params.append(\"id\", getSiteId());\n            params.append(\"kid\", kid);\n            params.append(\"token\", getCookie('kenzap_token'));\n\n            // send data\n            fetch('https://siteapi.kenzap.cloud/v1/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    _this.getAPIData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        },\n        removeKey: (e) => {\n\n            e.preventDefault();\n\n            let c = confirm( __('Remove this key?') );\n\n            if(!c) return;\n\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"remove_cloud_api_key\");\n            params.append(\"sid\", getSiteId());\n            params.append(\"id\", e.currentTarget.dataset.id);\n            params.append(\"token\", getCookie('kenzap_token'));\n\n            // send data\n            fetch('https://siteapi.kenzap.cloud/v1/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n\n                    _this.getAPIData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => { parseApiError(error); });\n        },\n        addKey: () => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('New API Key');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Create');\n            modal.querySelector(\".btn-primary\").classList.remove('btn-danger');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n\n                    <label for=\"ptitle\" class=\"form-label\">${ __('Access type') }</label>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"key-type\" id=\"radio_1\" value=\"1\" checked=\"checked\">\n                        ${ __('Frontend') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Allow signed in users access this cloud space data.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input text-warning\" name=\"key-type\" id=\"radio_2\" value=\"2\" >\n                        ${ __('Backend') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Allow API data access. Does not require user sign in. Never use backend keys for frontend queries.') }</p>\n                    </div>\n\n                    <label for=\"ptitle\" class=\"form-label\">${ __('Permissions') }</label>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"key-perm\" id=\"radio_3\" value=\"1\" checked=\"checked\">\n                        ${ __('Read only') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read permissions to data stored in this space.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"key-perm\" id=\"radio_4\" value=\"2\">\n                        ${ __('Read & write') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Grants read and write permissions to data stored in this space.') }</p>\n                    </div>\n\n                    <label for=\"ptitle\" class=\"form-label\">${ __('Isolated') }</label>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"key-iso\" id=\"radio_4\" value=\"1\" checked=\"checked\">\n                        ${ __('Yes') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Can only access data generated by same API key or user.') }</p>\n                    </div>\n                    <div class=\"form-check\">\n                        <label class=\"form-check-label\" class=\"form-label\">\n                        <input type=\"radio\" class=\"form-check-input\" name=\"key-iso\" id=\"radio_5\" value=\"2\">\n                        ${ __('No') }\n                        <i class=\"input-helper\"></i></label>\n                        <p class=\"form-text\">${ __('Can access any data in this space.') }</p>\n                    </div>\n                </div>\n            </div>\n            `;\n\n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                if(modal.querySelector(\".btn-primary\").dataset.loading === 'true') return;\n\n                modal.querySelector(\".btn-primary\").dataset.loading = true;\n                modal.querySelector(\".btn-primary\").innerHTML = '<span class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>' + __('Loading..');\n\n                let type = modal.querySelector(\".modal.show input[name='key-type']:checked\").value;\n                let perm = modal.querySelector(\".modal.show input[name='key-perm']:checked\").value;\n                let iso = modal.querySelector(\".modal.show input[name='key-iso']:checked\").value;\n                \n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"add_cloud_api_key\");\n                params.append(\"id\", getSiteId());\n                params.append(\"type\", type);\n                params.append(\"perm\", perm);\n                params.append(\"iso\", iso);\n                params.append(\"token\", getCookie('kenzap_token'));\n\n                // send data\n                fetch('https://siteapi.kenzap.cloud/v1/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                    },\n                    body: params \n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n\n                    if (response.success){\n\n                        _this.getAPIData();\n\n                        modalCont.hide();\n\n                    }else{\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            }\n\n            modalCont.show();\n\n            // setTimeout( () => modal.querySelector(\"#uid\").focus(), 100 );\n        },\n        removeSpace: (e) => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Remove cloud space #' + getSiteId() + '?');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Confirm');\n            modal.querySelector(\".btn-primary\").classList.add('btn-danger');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group d-none\">\n                    <label for=\"uid\" class=\"form-label\">${ __('User ID') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"uid\" autocomplete=\"off\" placeholder=\"100000590923\">\n                    <p class=\"form-text\">${ __('User ID can be found under') } <b>${ __('My Account &gt; My Profile</b> section.') }</p>\n                </div>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64\" height=\"64\" fill=\"currentColor\" class=\"bi bi-exclamation-circle text-danger mb-3\" viewBox=\"0 0 16 16\">\n                    <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                    <path d=\"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z\"/>\n                </svg>\n                <p>${ __('After this operation <b>all cloud stored data</b>, translations, saved extensions, API keys and user access rules will be entirely removed from Kenzap servers.</p><p>Please confirm to continue.</p>') }</p>\n            </div>`;\n\n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n                \n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"remove_cloud_space\");\n                params.append(\"id\", getSiteId());\n                params.append(\"token\", getCookie('kenzap_token'));\n    \n                // send data\n                fetch('https://siteapi.kenzap.cloud/v1/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        // 'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    },\n                    body: params \n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n\n                    if (response.success){\n\n                        localStorage.removeItem('header-version', '');\n\n                        location.reload();\n\n                        // _this.getAPIData();\n\n                        // modalCont.hide();\n\n                    }else{\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            };\n\n            modalCont.show();\n\n        },\n        addSpace: (e) => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Create new cloud space');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Create');\n            modal.querySelector(\".btn-primary\").classList.remove('btn-danger');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n                    <label for=\"s-name\" class=\"form-label\">${ __('Space name') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"s-name\" autocomplete=\"off\" value=\"\">\n                    <p class=\"form-text\">${ __('New cloud space name') }</p>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"s-desc\" class=\"form-label\">${ __('Description (optional)') }</label>\n                    <textarea type=\"text\" class=\"form-control\" id=\"s-desc\" autocomplete=\"off\" rows=\"2\" placeholder=\"\"></textarea>\n                    <p class=\"form-text\">${ __('Short cloud space description') }</p>\n                </div>\n            </div>`;\n\n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let name = document.querySelector('#s-name').value;\n                let desc = document.querySelector('#s-desc').value;\n                if(name.length < 5){ alert(__('Please provide a longer name')); return; }\n                // if(desc.length < 5){ alert(__('Please provide a longer name')); return; }\n                \n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"new_cloud_space\");\n                params.append(\"id\", getSiteId());\n                params.append(\"title\", name);\n                params.append(\"desc\", desc);\n                params.append(\"token\", getCookie('kenzap_token'));\n    \n                // send data\n                fetch('https://siteapi.kenzap.cloud/v1/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                    },\n                    body: params \n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n\n                    if (response.success){\n\n                        localStorage.removeItem('header-version', '');\n\n                        location.reload();\n\n                    }else{\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            };\n\n            modalCont.show();\n        },\n        renameSpace: (e) => {\n\n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Rename cloud space #' + getSiteId() + '?');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Rename');\n            modal.querySelector(\".btn-primary\").classList.remove('btn-danger');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group\">\n                    <label for=\"current-name\" class=\"form-label\">${ __('Current name') }</label>\n                    <input type=\"text\" class=\"form-control border-0\" id=\"current-name\" disabled=\"true\" autocomplete=\"off\" value=\"${ document.querySelector('#spaceSelect').innerHTML }\">\n                    <p class=\"form-text\">${ __('Current cloud space name') }</p>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"new-name\" class=\"form-label\">${ __('New name') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"new-name\" autocomplete=\"off\" placeholder=\"My Space\">\n                    <p class=\"form-text\">${ __('New cloud space name') }</p>\n                </div>\n            </div>`;\n\n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n\n                let name = document.querySelector('#new-name').value;\n                if(name.length < 5){ alert(__('Please provide a longer name')); return; }\n                \n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"rename_cloud_space\");\n                params.append(\"id\", getSiteId());\n                params.append(\"title\", name);\n                params.append(\"token\", getCookie('kenzap_token'));\n    \n                // send data\n                fetch('https://siteapi.kenzap.cloud/v1/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                    },\n                    body: params \n                })\n                .then(response => response.json())\n                .then(response => {\n\n                    modal.querySelector(\".btn-primary\").dataset.loading = false;\n\n                    if (response.success){\n\n                        localStorage.removeItem('header-version', '');\n\n                        location.reload();\n\n                    }else{\n\n                        parseApiError(response);\n                    }\n                })\n                .catch(error => { parseApiError(error); });\n            };\n\n            modalCont.show();\n        },\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    loadPageStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n    initFooter: () => {\n        \n        initFooter(__('Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.', '<a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">', '</a>', '<a class=\"text-muted\" href=\"https://github.com/kenzap/dashboard\" target=\"_blank\">', '</a>'), '');\n        // initFooter(__('Copyright © '+new Date().getFullYear()+' <a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">Kenzap</a>. All rights reserved.'), __('Kenzap Cloud Services - Dashboard'));\n    }\n}\n\n_this.init();\n"],"names":["HTMLContent","__","_this","state","firstLoad","ajaxQueue","dataAPI","data","init","getData","getAPIData","params","URLSearchParams","append","getSiteId","getCookie","fetch","method","headers","body","then","response","json","hideLoader","success","startRender","parseApiError","error","showLoader","JSON","stringify","query","user","type","fields","token","locale","source","key","initHeader","loadPageStructure","renderPage","initListeners","initFooter","product","d","document","initBreadcrumbs","link","text","listKeys","keys","rowKeysStruct","querySelector","innerHTML","listUsers","i","users","rowUserStruct","kid","length","Image","onload","setAttribute","src","name","getType","role","parseInt","perm","iso","id","t","html","onClick","listeners","removeUser","removeKey","addUser","addKey","removeSpace","renameSpace","addSpace","modalSuccessBtn","modal","modalCont","bootstrap","Modal","classList","remove","modalHTml","modalSuccessBtnFunc","e","preventDefault","dataset","loading","uid","value","alert","hide","show","setTimeout","focus","currentTarget","c","confirm","add","localStorage","removeItem","location","reload","desc"],"mappings":"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"}